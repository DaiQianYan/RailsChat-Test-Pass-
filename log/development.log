

Started GET "/" for 127.0.0.1 at 2017-10-18 15:03:43 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.5.2) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.5.2) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.5.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.5) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.5.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.5) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/static.rb:116:in `call'
  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.5.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.5.2) lib/rails/application.rb:165:in `call'
  rack (1.6.5) lib/rack/content_length.rb:15:in `call'
  thin (1.7.0) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.0) lib/thin/connection.rb:84:in `catch'
  thin (1.7.0) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.0) lib/thin/connection.rb:53:in `process'
  thin (1.7.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run'
  thin (1.7.0) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.0) lib/thin/server.rb:162:in `start'
  rack (1.6.5) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.5) lib/rack/server.rb:286:in `start'
  railties (4.2.5.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.5.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (61.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (353.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (414.5ms)


Started GET "/" for 127.0.0.1 at 2017-10-18 15:18:01 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.5.2) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.5.2) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.5.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.5) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.5.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.5) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/static.rb:116:in `call'
  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.5.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.5.2) lib/rails/application.rb:165:in `call'
  rack (1.6.5) lib/rack/content_length.rb:15:in `call'
  thin (1.7.0) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.0) lib/thin/connection.rb:84:in `catch'
  thin (1.7.0) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.0) lib/thin/connection.rb:53:in `process'
  thin (1.7.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run'
  thin (1.7.0) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.0) lib/thin/server.rb:162:in `start'
  rack (1.6.5) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.5) lib/rack/server.rb:286:in `start'
  railties (4.2.5.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.5.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (61.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (372.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (434.8ms)


Started GET "/" for 127.0.0.1 at 2017-10-18 15:19:10 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.5.2) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.5.2) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.5.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.5) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.5.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.5) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/static.rb:116:in `call'
  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.5.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.5.2) lib/rails/application.rb:165:in `call'
  rack (1.6.5) lib/rack/content_length.rb:15:in `call'
  thin (1.7.0) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.0) lib/thin/connection.rb:84:in `catch'
  thin (1.7.0) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.0) lib/thin/connection.rb:53:in `process'
  thin (1.7.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run'
  thin (1.7.0) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.0) lib/thin/server.rb:162:in `start'
  rack (1.6.5) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.5) lib/rack/server.rb:286:in `start'
  railties (4.2.5.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.5.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (52.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (107.2ms)


Started GET "/" for 127.0.0.1 at 2017-10-18 15:19:12 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.5.2) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.5.2) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.5.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.5) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.5.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.5) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/static.rb:116:in `call'
  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.5.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.5.2) lib/rails/application.rb:165:in `call'
  rack (1.6.5) lib/rack/content_length.rb:15:in `call'
  thin (1.7.0) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.0) lib/thin/connection.rb:84:in `catch'
  thin (1.7.0) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.0) lib/thin/connection.rb:53:in `process'
  thin (1.7.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run'
  thin (1.7.0) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.0) lib/thin/server.rb:162:in `start'
  rack (1.6.5) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.5) lib/rack/server.rb:286:in `start'
  railties (4.2.5.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.5.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (47.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (44.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (93.2ms)


Started GET "/" for 127.0.0.1 at 2017-10-18 16:16:22 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.5.2) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.5.2) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.5.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.5) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.5.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.5) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/static.rb:116:in `call'
  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.5.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.5.2) lib/rails/application.rb:165:in `call'
  rack (1.6.5) lib/rack/content_length.rb:15:in `call'
  thin (1.7.0) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.0) lib/thin/connection.rb:84:in `catch'
  thin (1.7.0) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.0) lib/thin/connection.rb:53:in `process'
  thin (1.7.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run'
  thin (1.7.0) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.0) lib/thin/server.rb:162:in `start'
  rack (1.6.5) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.5) lib/rack/server.rb:286:in `start'
  railties (4.2.5.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.5.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (59.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (367.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (432.7ms)


Started GET "/" for ::1 at 2017-10-18 16:17:25 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.5.2) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.5.2) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.5.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.5.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.5.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.5.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.5) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.5) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.5.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.5) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.5.2) lib/action_dispatch/middleware/static.rb:116:in `call'
  rack (1.6.5) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.5.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.5.2) lib/rails/application.rb:165:in `call'
  rack (1.6.5) lib/rack/content_length.rb:15:in `call'
  thin (1.7.0) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.0) lib/thin/connection.rb:84:in `catch'
  thin (1.7.0) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.0) lib/thin/connection.rb:53:in `process'
  thin (1.7.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.2) lib/eventmachine.rb:194:in `run'
  thin (1.7.0) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.0) lib/thin/server.rb:162:in `start'
  rack (1.6.5) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.5) lib/rack/server.rb:286:in `start'
  railties (4.2.5.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.5.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.5.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (55.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (340.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.2.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (401.5ms)


Started GET "/" for ::1 at 2017-10-26 10:42:43 +0800

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.10) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.10) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (327.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (391.4ms)


Started PUT "/__web_console/repl_sessions/898bcae0018a282bf5dbc41e4baba812" for ::1 at 2017-10-26 10:43:04 +0800
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateUsers (20170218065508)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "password_digest" varchar, "remember_digest" varchar, "sex" varchar, "phonenumber" varchar, "status" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_users_on_name" ON "users" ("name")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_name' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20170218065508"]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateMessages (20170220073308)
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "body" text, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_messages_on_user_id" ON "messages" ("user_id")
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_messages_on_chat_id" ON "messages" ("chat_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170220073308"]]
  [1m[35m (0.5ms)[0m  commit transaction
Migrating to CreateChats (20170220110813)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "chats" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" varchar, "admin_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170220110813"]]
  [1m[35m (0.8ms)[0m  commit transaction
Migrating to ChatsUsers (20170220111114)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "chats_users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "chat_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_chats_users_on_user_id" ON "chats_users" ("user_id")[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_user_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_chats_users_on_chat_id" ON "chats_users" ("chat_id")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20170220111114"]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateFriendships (20170228114534)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "friendships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "friend_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_friendships_on_user_id" ON "friendships" ("user_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendships_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendships_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_friendships_on_friend_id" ON "friendships" ("friend_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170228114534"]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_chat_id' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_chats_users_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_friendships_on_friend_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendships_on_friend_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_friendships_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_friendships_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_chat_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_chat_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_name' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user1@test.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user1"], ["email", "user1@test.com"], ["password_digest", "$2a$10$SMGLZBZ0GCDOEzTKpJ2hq.i0V/.6j17MyfspNrkDOuKgq.GBBtrvy"], ["role", 4], ["sex", "male"], ["phonenumber", "(158) 354-3632"], ["status", "engineer"], ["created_at", "2017-10-26 02:46:46.750304"], ["updated_at", "2017-10-26 02:46:46.750304"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user2@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user2"], ["email", "user2@test.com"], ["password_digest", "$2a$10$DPDqULPj2E.MiJ1xVwL8tu/oyYyNhlzEuC6FFZ8IXvLmxICu/OJdG"], ["role", 3], ["sex", "male"], ["phonenumber", "1-674-447-6251 x5967"], ["status", "programmer"], ["created_at", "2017-10-26 02:46:46.806353"], ["updated_at", "2017-10-26 02:46:46.806353"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user3@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user3"], ["email", "user3@test.com"], ["password_digest", "$2a$10$clLpQsawND1UXfs.8VT8/uOPPRXngLffEPTP2PywthmETnxFMgq5e"], ["role", 1], ["sex", "male"], ["phonenumber", "1-683-554-1901"], ["status", "human resources"], ["created_at", "2017-10-26 02:46:46.869557"], ["updated_at", "2017-10-26 02:46:46.869557"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user4@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user4"], ["email", "user4@test.com"], ["password_digest", "$2a$10$Q51dCyistPVyceH8qvl6tOlTXcgKecoBlbGnX1c7RKWro8fZPLTKC"], ["role", 4], ["sex", "female"], ["phonenumber", "(257) 236-6835 x7324"], ["status", "philosopher"], ["created_at", "2017-10-26 02:46:46.932852"], ["updated_at", "2017-10-26 02:46:46.932852"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user5@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user5"], ["email", "user5@test.com"], ["password_digest", "$2a$10$dpJF2R.LBEWcj70HGOS1J.jGSwPrymG0NVtfW47f2TEkNmtrT.oF."], ["role", 2], ["sex", "female"], ["phonenumber", "363.021.9787 x79898"], ["status", "human resources"], ["created_at", "2017-10-26 02:46:46.994888"], ["updated_at", "2017-10-26 02:46:46.994888"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user6@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user6"], ["email", "user6@test.com"], ["password_digest", "$2a$10$bG/FLMfqcLAc5WaU5fYCUe.9.oKLFiHqLt4BFiqxAJ.lMhYL9jk/C"], ["role", 4], ["sex", "female"], ["phonenumber", "1-603-250-3672 x8005"], ["status", "astronomer"], ["created_at", "2017-10-26 02:46:47.052531"], ["updated_at", "2017-10-26 02:46:47.052531"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user7@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user7"], ["email", "user7@test.com"], ["password_digest", "$2a$10$8wQkTGcEzY0R7OcM0cKzReg7PnJP8z1zTnfkel3nPWIMmzoQ0ovy2"], ["role", 1], ["sex", "female"], ["phonenumber", "126.882.8999"], ["status", "actor"], ["created_at", "2017-10-26 02:46:47.115638"], ["updated_at", "2017-10-26 02:46:47.115638"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user8@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user8"], ["email", "user8@test.com"], ["password_digest", "$2a$10$SfgjT0N5HaG9TQoMm21upe0uHDfsgxTgwQK/73cu4Wj7YKDsCxJpm"], ["role", 4], ["sex", "female"], ["phonenumber", "712-808-7376"], ["status", "actor"], ["created_at", "2017-10-26 02:46:47.172307"], ["updated_at", "2017-10-26 02:46:47.172307"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user9@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user9"], ["email", "user9@test.com"], ["password_digest", "$2a$10$4CAUwp7ObeDaIeS6bB85Xuf8g1TiLuVLMC2TOpvcXPyyJXgTWr5Ou"], ["role", 1], ["sex", "male"], ["phonenumber", "(338) 534-3817 x1769"], ["status", "advocate"], ["created_at", "2017-10-26 02:46:47.228288"], ["updated_at", "2017-10-26 02:46:47.228288"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user10@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user10"], ["email", "user10@test.com"], ["password_digest", "$2a$10$S43H0AT/kKFJwYuqLIMo3.65eCoas90SBi4vn/WtCmuFPvnxkbb5O"], ["role", 2], ["sex", "female"], ["phonenumber", "(183) 248-8239 x74636"], ["status", "actor"], ["created_at", "2017-10-26 02:46:47.284799"], ["updated_at", "2017-10-26 02:46:47.284799"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user11@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user11"], ["email", "user11@test.com"], ["password_digest", "$2a$10$//oPEGa1fvhgYkoBK6Ih7e4MJM8dXa1rCe7ml2JacrYUa0gqX56bG"], ["role", 3], ["sex", "female"], ["phonenumber", "761-135-9874 x0049"], ["status", "human resources"], ["created_at", "2017-10-26 02:46:47.350546"], ["updated_at", "2017-10-26 02:46:47.350546"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user12@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user12"], ["email", "user12@test.com"], ["password_digest", "$2a$10$SGU75gufAei.ojb/ItvGp.ENdHVrbQ1vNo7eSLJOSxO6qE5G2SeIS"], ["role", 2], ["sex", "female"], ["phonenumber", "275.514.1204"], ["status", "architect"], ["created_at", "2017-10-26 02:46:47.412716"], ["updated_at", "2017-10-26 02:46:47.412716"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user13@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user13"], ["email", "user13@test.com"], ["password_digest", "$2a$10$c0Hc3uU7JQl9PksSLRoMyOlxW2uANQA4VPo/AN.zCqg7F3omanrmW"], ["role", 2], ["sex", "female"], ["phonenumber", "1-815-114-4080 x297"], ["status", "doctor"], ["created_at", "2017-10-26 02:46:47.473529"], ["updated_at", "2017-10-26 02:46:47.473529"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user14@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user14"], ["email", "user14@test.com"], ["password_digest", "$2a$10$COQr.irDguXqKhhMs8gBS.t7c02gdOaEE2B5FJHI3srgtkxdvo19a"], ["role", 1], ["sex", "male"], ["phonenumber", "(743) 317-5939"], ["status", "agriculturist"], ["created_at", "2017-10-26 02:46:47.529281"], ["updated_at", "2017-10-26 02:46:47.529281"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user15@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user15"], ["email", "user15@test.com"], ["password_digest", "$2a$10$1RvxV/imtYgwNfT6hxAczeNkCCgwGaRXmk9LTgrUIS9Ifnf69yXde"], ["role", 3], ["sex", "male"], ["phonenumber", "1-580-253-3285 x1531"], ["status", "web developer"], ["created_at", "2017-10-26 02:46:47.589487"], ["updated_at", "2017-10-26 02:46:47.589487"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user16@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user16"], ["email", "user16@test.com"], ["password_digest", "$2a$10$9PzSmy6UgYtbtBJo.kLTNuJTHuNhrnSQK5mc6U6FWnHkX5FLWZFde"], ["role", 1], ["sex", "male"], ["phonenumber", "116.012.4286"], ["status", "accountant"], ["created_at", "2017-10-26 02:46:47.645418"], ["updated_at", "2017-10-26 02:46:47.645418"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user17@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user17"], ["email", "user17@test.com"], ["password_digest", "$2a$10$NCV9Do5/fj0ufsQ5GHXvK.kFimOHU7XN21eAo8a4g0BQghKMw.oIW"], ["role", 2], ["sex", "female"], ["phonenumber", "684-010-5158 x37207"], ["status", "police officer"], ["created_at", "2017-10-26 02:46:47.701452"], ["updated_at", "2017-10-26 02:46:47.701452"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user18@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user18"], ["email", "user18@test.com"], ["password_digest", "$2a$10$sx.pOiIz5JIAHqJQ6A/sTO0l2Y2hBGNa0AsWWJYYQljILpMLaw3P6"], ["role", 3], ["sex", "female"], ["phonenumber", "(998) 130-6200 x82909"], ["status", "programmer"], ["created_at", "2017-10-26 02:46:47.763807"], ["updated_at", "2017-10-26 02:46:47.763807"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user19@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user19"], ["email", "user19@test.com"], ["password_digest", "$2a$10$A0.sJWyje5TS.T8gqNmh.e9v4acJP69x0fUzbuaEwswpwYStLG6Va"], ["role", 1], ["sex", "female"], ["phonenumber", "(176) 813-5424"], ["status", "chemist"], ["created_at", "2017-10-26 02:46:47.819800"], ["updated_at", "2017-10-26 02:46:47.819800"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user20@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user20"], ["email", "user20@test.com"], ["password_digest", "$2a$10$y164b1eX0QRo/L.13gVTpuS6KSkJNZXqm6qaJs0zLxvLyTDQkxKNS"], ["role", 3], ["sex", "male"], ["phonenumber", "(483) 369-3604 x6053"], ["status", "firefighter"], ["created_at", "2017-10-26 02:46:47.880845"], ["updated_at", "2017-10-26 02:46:47.880845"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user21@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user21"], ["email", "user21@test.com"], ["password_digest", "$2a$10$MDHSA2zhrUbqPRC8YZib8Ofcfjmrg8R3pfEdgl/AqjvFfBNejm4OS"], ["role", 3], ["sex", "female"], ["phonenumber", "(678) 310-1943 x84009"], ["status", "chemist"], ["created_at", "2017-10-26 02:46:47.941683"], ["updated_at", "2017-10-26 02:46:47.941683"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user22@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user22"], ["email", "user22@test.com"], ["password_digest", "$2a$10$TTR82VaMFIsYIzOZvvuOGOm9RoJeqpm8K3LFPSvuPvZeFHgbgcGj."], ["role", 4], ["sex", "male"], ["phonenumber", "1-612-004-0254 x43465"], ["status", "judge"], ["created_at", "2017-10-26 02:46:48.001898"], ["updated_at", "2017-10-26 02:46:48.001898"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user23@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user23"], ["email", "user23@test.com"], ["password_digest", "$2a$10$u7FCGZuqerS0mN9JVtCnnuSqzLF5ZD34DAsMT6KB8xr5G8RMR7n/W"], ["role", 1], ["sex", "male"], ["phonenumber", "814.697.0274 x93571"], ["status", "physicist"], ["created_at", "2017-10-26 02:46:48.062362"], ["updated_at", "2017-10-26 02:46:48.062362"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user24@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user24"], ["email", "user24@test.com"], ["password_digest", "$2a$10$VqfOG9nBvvx99bpNH5fi2eCO9J4d25ML5hqFtWI/KqL9Hrk65j6RS"], ["role", 3], ["sex", "male"], ["phonenumber", "530.893.0974 x041"], ["status", "philosopher"], ["created_at", "2017-10-26 02:46:48.118271"], ["updated_at", "2017-10-26 02:46:48.118271"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user25@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user25"], ["email", "user25@test.com"], ["password_digest", "$2a$10$663V0V2Vp8yOx1PvUO5tieJVP/wHRuORsz45VfjjknZeTCqirA/Ra"], ["role", 1], ["sex", "male"], ["phonenumber", "338.165.1509"], ["status", "web developer"], ["created_at", "2017-10-26 02:46:48.175212"], ["updated_at", "2017-10-26 02:46:48.175212"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user26@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user26"], ["email", "user26@test.com"], ["password_digest", "$2a$10$69baulXci05Cw2yeYbEkpeopLtokxZy7RZU1qUgshLA./kM3.Ecga"], ["role", 1], ["sex", "female"], ["phonenumber", "593-885-7364"], ["status", "accountant"], ["created_at", "2017-10-26 02:46:48.236963"], ["updated_at", "2017-10-26 02:46:48.236963"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user27@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user27"], ["email", "user27@test.com"], ["password_digest", "$2a$10$ALs2xOOO1gK1QjmRblGyPuRowTJug3WsAImOCEsXlHSCxEOoARwuS"], ["role", 1], ["sex", "male"], ["phonenumber", "902.145.0265"], ["status", "programmer"], ["created_at", "2017-10-26 02:46:48.297744"], ["updated_at", "2017-10-26 02:46:48.297744"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user28@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user28"], ["email", "user28@test.com"], ["password_digest", "$2a$10$u.7QcbCiBZigVgSaoHFqSOVp3j/tRqE/l7bVGAHnCiOvHIjZgeQma"], ["role", 3], ["sex", "male"], ["phonenumber", "774.720.5236 x117"], ["status", "human resources"], ["created_at", "2017-10-26 02:46:48.355782"], ["updated_at", "2017-10-26 02:46:48.355782"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user29@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user29"], ["email", "user29@test.com"], ["password_digest", "$2a$10$SCIJzFvfWSXrDa5TQUSxm.ktdQs5D/..uWkjHM/NjYOjnhVokSsO6"], ["role", 4], ["sex", "male"], ["phonenumber", "(999) 781-9777 x73531"], ["status", "musician"], ["created_at", "2017-10-26 02:46:48.417723"], ["updated_at", "2017-10-26 02:46:48.417723"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user30@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user30"], ["email", "user30@test.com"], ["password_digest", "$2a$10$o6pDARNNQ2Efjs844ifi.OjPCOIpKZhs5YvAIIhuCrChDsPd7SPD2"], ["role", 1], ["sex", "male"], ["phonenumber", "707-718-5575"], ["status", "teacher"], ["created_at", "2017-10-26 02:46:48.477804"], ["updated_at", "2017-10-26 02:46:48.477804"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user31@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user31"], ["email", "user31@test.com"], ["password_digest", "$2a$10$Pkm.OywCfDAtVmQ7zXdcxOtwSHEIpGGwOfWe41DVZbiX5V4pztLgK"], ["role", 2], ["sex", "female"], ["phonenumber", "(490) 676-7125 x02925"], ["status", "doctor"], ["created_at", "2017-10-26 02:46:48.539453"], ["updated_at", "2017-10-26 02:46:48.539453"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user32@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user32"], ["email", "user32@test.com"], ["password_digest", "$2a$10$QPhjbK.joSPHSOR6W1WHteZOR72x.CtL5oWrJsW1Z1oT.xb8egmSK"], ["role", 3], ["sex", "female"], ["phonenumber", "761.760.7597 x3723"], ["status", "librarian"], ["created_at", "2017-10-26 02:46:48.601763"], ["updated_at", "2017-10-26 02:46:48.601763"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user33@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user33"], ["email", "user33@test.com"], ["password_digest", "$2a$10$T9Cx1Gfh78JaAOI.GzCiVeAXKA/rXAqpGtESMRkaJEKyPSYKwj3g6"], ["role", 1], ["sex", "female"], ["phonenumber", "884-699-7397"], ["status", "advocate"], ["created_at", "2017-10-26 02:46:48.662776"], ["updated_at", "2017-10-26 02:46:48.662776"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user34@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user34"], ["email", "user34@test.com"], ["password_digest", "$2a$10$Mg.i9yPqexh2kJ7.6qIQue08d..HyFoJK6gWaU798BPkYsBYnojcu"], ["role", 3], ["sex", "male"], ["phonenumber", "827.396.8132 x82434"], ["status", "musician"], ["created_at", "2017-10-26 02:46:48.722900"], ["updated_at", "2017-10-26 02:46:48.722900"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user35@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user35"], ["email", "user35@test.com"], ["password_digest", "$2a$10$BFAXYAdvzCUtfmbT/uXCkuvYSp3Lx8BrxWIqA2I.mGo7aAtF5uHQe"], ["role", 3], ["sex", "male"], ["phonenumber", "1-287-318-4366"], ["status", "advocate"], ["created_at", "2017-10-26 02:46:48.779604"], ["updated_at", "2017-10-26 02:46:48.779604"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user36@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user36"], ["email", "user36@test.com"], ["password_digest", "$2a$10$oUX1Bqrd.pbCtHJkc7NZ/O4u/9P695YrYN6wT8ed7w04N1BcVmZhK"], ["role", 3], ["sex", "female"], ["phonenumber", "1-440-822-4227 x57234"], ["status", "doctor"], ["created_at", "2017-10-26 02:46:48.848088"], ["updated_at", "2017-10-26 02:46:48.848088"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user37@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user37"], ["email", "user37@test.com"], ["password_digest", "$2a$10$ok4O944g8ZHw6bmejFjg8ejpiSMp/vt7m9PPEup/yOlLTqew2AYy6"], ["role", 2], ["sex", "female"], ["phonenumber", "1-570-468-8253"], ["status", "agriculturist"], ["created_at", "2017-10-26 02:46:48.904165"], ["updated_at", "2017-10-26 02:46:48.904165"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user38@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user38"], ["email", "user38@test.com"], ["password_digest", "$2a$10$L0O3iuiY48xfDVj2IQ3TN.4fNPNXZWJ3qiCPRFVJr2sv7deGVd1d6"], ["role", 4], ["sex", "female"], ["phonenumber", "118.516.1009"], ["status", "attorney at law"], ["created_at", "2017-10-26 02:46:48.965415"], ["updated_at", "2017-10-26 02:46:48.965415"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user39@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user39"], ["email", "user39@test.com"], ["password_digest", "$2a$10$E8rTDPzetokr.Ti0mpqCsuaXCNU2XcsQCb84.rdulRnk9FWHiDLZm"], ["role", 3], ["sex", "female"], ["phonenumber", "974-168-1040"], ["status", "attorney at law"], ["created_at", "2017-10-26 02:46:49.030970"], ["updated_at", "2017-10-26 02:46:49.030970"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user40@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user40"], ["email", "user40@test.com"], ["password_digest", "$2a$10$BHdWrwukleUeNB5VTmrD..OiNjv/7WUl.QQaa5QtQ1gISrfEEF7Sy"], ["role", 3], ["sex", "female"], ["phonenumber", "(948) 852-1290"], ["status", "police officer"], ["created_at", "2017-10-26 02:46:49.101643"], ["updated_at", "2017-10-26 02:46:49.101643"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user41@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user41"], ["email", "user41@test.com"], ["password_digest", "$2a$10$b1U29LIaT6qzym0/u6WQ9uAh5mTfo9bE8FV4I2AfdB/9UDiGrKZlu"], ["role", 4], ["sex", "female"], ["phonenumber", "1-531-738-6683"], ["status", "accountant"], ["created_at", "2017-10-26 02:46:49.164008"], ["updated_at", "2017-10-26 02:46:49.164008"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user42@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user42"], ["email", "user42@test.com"], ["password_digest", "$2a$10$58.neBZcau7RUxyQc/vSue5HXvmYlLKci9Bkq9Y7leB6u6KeQkYtC"], ["role", 3], ["sex", "male"], ["phonenumber", "(323) 889-2417"], ["status", "engineer"], ["created_at", "2017-10-26 02:46:49.226777"], ["updated_at", "2017-10-26 02:46:49.226777"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user43@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user43"], ["email", "user43@test.com"], ["password_digest", "$2a$10$.F00HLf17DsVuUmio/6IsurnAHhYpzmeoM2SwUGFuDeJoxtYG0lsG"], ["role", 3], ["sex", "male"], ["phonenumber", "416.163.6388 x18138"], ["status", "human resources"], ["created_at", "2017-10-26 02:46:49.287147"], ["updated_at", "2017-10-26 02:46:49.287147"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user44@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user44"], ["email", "user44@test.com"], ["password_digest", "$2a$10$l7K8l6xA61cHRfsK0Qx65OMiQENvrGpbyH5WRkKB.DQmgy60a/F5i"], ["role", 2], ["sex", "male"], ["phonenumber", "(352) 289-5842"], ["status", "librarian"], ["created_at", "2017-10-26 02:46:49.354679"], ["updated_at", "2017-10-26 02:46:49.354679"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user45@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user45"], ["email", "user45@test.com"], ["password_digest", "$2a$10$uI3wRsRMsKhKCKf5QHhmaenhHRFhH/dLoFfPB1nvPNUBMP/T3IACy"], ["role", 1], ["sex", "female"], ["phonenumber", "(763) 779-2334 x81286"], ["status", "web developer"], ["created_at", "2017-10-26 02:46:49.416155"], ["updated_at", "2017-10-26 02:46:49.416155"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user46@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user46"], ["email", "user46@test.com"], ["password_digest", "$2a$10$k5jqsYXUBZMFEagVaKcFVu8lgQUwhJ9wjhhEnnuWShD2P41CmQsoK"], ["role", 4], ["sex", "female"], ["phonenumber", "202.678.4418"], ["status", "astronomer"], ["created_at", "2017-10-26 02:46:49.476325"], ["updated_at", "2017-10-26 02:46:49.476325"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user47@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user47"], ["email", "user47@test.com"], ["password_digest", "$2a$10$8liIOiFWhRvdT9vAa58Qj.NR4YV9/4MZCJVavS/kKAMYL3mYwHvw2"], ["role", 4], ["sex", "male"], ["phonenumber", "(325) 521-9968 x0480"], ["status", "economist"], ["created_at", "2017-10-26 02:46:49.532363"], ["updated_at", "2017-10-26 02:46:49.532363"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user48@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user48"], ["email", "user48@test.com"], ["password_digest", "$2a$10$Hq7a1.4M909Yt7wwzvzBRexRZTAq7YGb04gfaODJ3iUKIHZyRDTm."], ["role", 4], ["sex", "male"], ["phonenumber", "1-809-863-8021"], ["status", "economist"], ["created_at", "2017-10-26 02:46:49.588928"], ["updated_at", "2017-10-26 02:46:49.588928"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user49@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user49"], ["email", "user49@test.com"], ["password_digest", "$2a$10$.RBCyIlZXZTuDDoOouI6JO6cT67X6dPD666/50/UXPBYCS2BAAMZy"], ["role", 2], ["sex", "female"], ["phonenumber", "503-533-5887 x7658"], ["status", "physicist"], ["created_at", "2017-10-26 02:46:49.644950"], ["updated_at", "2017-10-26 02:46:49.644950"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user50@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user50"], ["email", "user50@test.com"], ["password_digest", "$2a$10$EAeNfHLXkhNI7UX5FviNPODWhpBmHx7nX2Fd0IIc1BnJB9EmL4Cxq"], ["role", 2], ["sex", "female"], ["phonenumber", "869-117-7732 x3561"], ["status", "police officer"], ["created_at", "2017-10-26 02:46:49.706317"], ["updated_at", "2017-10-26 02:46:49.706317"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user51@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user51"], ["email", "user51@test.com"], ["password_digest", "$2a$10$5J88//AFxd3z5JEgIogS7uBjwEsFKRBIJQodbTsYgOZtcFZue1MBi"], ["role", 3], ["sex", "male"], ["phonenumber", "275-606-2554"], ["status", "web developer"], ["created_at", "2017-10-26 02:46:49.768902"], ["updated_at", "2017-10-26 02:46:49.768902"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user52@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user52"], ["email", "user52@test.com"], ["password_digest", "$2a$10$.H3uUaFWkAmtxT/efvqsK.WUA/RMClOoNdXxPFBvsbHPV.FmVGCfK"], ["role", 4], ["sex", "male"], ["phonenumber", "(969) 039-4163 x0258"], ["status", "firefighter"], ["created_at", "2017-10-26 02:46:49.831059"], ["updated_at", "2017-10-26 02:46:49.831059"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user53@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user53"], ["email", "user53@test.com"], ["password_digest", "$2a$10$9ENtIaGjzDzd4jacFFQPIuuer4xwIBPa6PcGAE3KPJc2lrhARM1t6"], ["role", 3], ["sex", "female"], ["phonenumber", "(697) 567-4518 x80850"], ["status", "engineer"], ["created_at", "2017-10-26 02:46:49.892096"], ["updated_at", "2017-10-26 02:46:49.892096"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user54@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user54"], ["email", "user54@test.com"], ["password_digest", "$2a$10$fcZ/LE8aNBVXZxt.1WT/HeSXTk07FVrdVpZovVQbqDA58mO6h5lra"], ["role", 4], ["sex", "male"], ["phonenumber", "(932) 608-0215 x7942"], ["status", "biologist"], ["created_at", "2017-10-26 02:46:49.948781"], ["updated_at", "2017-10-26 02:46:49.948781"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user55@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user55"], ["email", "user55@test.com"], ["password_digest", "$2a$10$siKAmVepfcbYFNB5vkhvZ.tj5S7q3xhHVmDCCs4sBXhSuhLdafAuG"], ["role", 1], ["sex", "female"], ["phonenumber", "476-212-8823"], ["status", "attorney at law"], ["created_at", "2017-10-26 02:46:50.009965"], ["updated_at", "2017-10-26 02:46:50.009965"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user56@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user56"], ["email", "user56@test.com"], ["password_digest", "$2a$10$AEgfuGG4sRbWfyVyA.aCheoMwTwZUDega8h1TR/48.dDdfpy541F2"], ["role", 4], ["sex", "male"], ["phonenumber", "351.201.5421"], ["status", "web developer"], ["created_at", "2017-10-26 02:46:50.065392"], ["updated_at", "2017-10-26 02:46:50.065392"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user57@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user57"], ["email", "user57@test.com"], ["password_digest", "$2a$10$aTCydj.p1DyftQN6EyFTA.GKVfc.F1Xy7Yh6YuJrG0RT00uNpICyC"], ["role", 3], ["sex", "male"], ["phonenumber", "(553) 437-8418"], ["status", "programmer"], ["created_at", "2017-10-26 02:46:50.121564"], ["updated_at", "2017-10-26 02:46:50.121564"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user58@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user58"], ["email", "user58@test.com"], ["password_digest", "$2a$10$9cWzZ2kR1KMYczwpNiQ8seF7dyR2kOIzuIk0pz.XlJJ.0n8n8P0Di"], ["role", 1], ["sex", "male"], ["phonenumber", "367-782-9471 x092"], ["status", "astronomer"], ["created_at", "2017-10-26 02:46:50.184328"], ["updated_at", "2017-10-26 02:46:50.184328"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user59@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user59"], ["email", "user59@test.com"], ["password_digest", "$2a$10$vDGcY1TVAY/d1hPO7qnsXeTtPEFgkWE3rfnzd2E4Ys5ZEtKWHRTSy"], ["role", 1], ["sex", "female"], ["phonenumber", "1-174-971-0780 x272"], ["status", "actor"], ["created_at", "2017-10-26 02:46:50.247972"], ["updated_at", "2017-10-26 02:46:50.247972"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user60@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user60"], ["email", "user60@test.com"], ["password_digest", "$2a$10$tNQnDVKgyy2j3lPZSTa.x.9RMegHrifDRJuvJMQGleEOPms8h9shS"], ["role", 4], ["sex", "female"], ["phonenumber", "566-873-0407"], ["status", "accountant"], ["created_at", "2017-10-26 02:46:50.312629"], ["updated_at", "2017-10-26 02:46:50.312629"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user61@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user61"], ["email", "user61@test.com"], ["password_digest", "$2a$10$hnRLlQ/d43sAUaUO3VNEH.jPvz.0nWTpxkOkAsMJYo3HoK0bqlDZ6"], ["role", 2], ["sex", "male"], ["phonenumber", "(967) 463-1332 x36464"], ["status", "designer"], ["created_at", "2017-10-26 02:46:50.373292"], ["updated_at", "2017-10-26 02:46:50.373292"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user62@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user62"], ["email", "user62@test.com"], ["password_digest", "$2a$10$am/Zg6MiiM5HkovqUmUf7eko/fvFjY4S6yhT.c9DvupeORE9xDF7q"], ["role", 2], ["sex", "male"], ["phonenumber", "537-892-5822 x434"], ["status", "statistician"], ["created_at", "2017-10-26 02:46:50.434242"], ["updated_at", "2017-10-26 02:46:50.434242"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user63@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user63"], ["email", "user63@test.com"], ["password_digest", "$2a$10$lbMdnFkjV3Kxm1M8QNBR9ubSMGdhuvgtWkfOyDFdqOQElmteFCU/O"], ["role", 4], ["sex", "female"], ["phonenumber", "627.699.5918"], ["status", "philosopher"], ["created_at", "2017-10-26 02:46:50.496579"], ["updated_at", "2017-10-26 02:46:50.496579"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user64@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user64"], ["email", "user64@test.com"], ["password_digest", "$2a$10$rDtld5TRmS4auRNDKNI1mO8MUEhIzU520HhZJE//6T2ki498oEyEO"], ["role", 2], ["sex", "female"], ["phonenumber", "548-670-0815 x83929"], ["status", "designer"], ["created_at", "2017-10-26 02:46:50.554542"], ["updated_at", "2017-10-26 02:46:50.554542"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user65@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user65"], ["email", "user65@test.com"], ["password_digest", "$2a$10$3gPKenMy8Q0IFXlirPxpEekGkITY4VgDreVds/6MaZQJZvPwGNbK6"], ["role", 1], ["sex", "male"], ["phonenumber", "(432) 135-5415 x2784"], ["status", "architect"], ["created_at", "2017-10-26 02:46:50.618156"], ["updated_at", "2017-10-26 02:46:50.618156"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user66@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user66"], ["email", "user66@test.com"], ["password_digest", "$2a$10$p22YBgIch867WjIWZFsPHO9VANyeRre1Z6Ij/hR6JnOi175cbgntG"], ["role", 1], ["sex", "male"], ["phonenumber", "(970) 281-1332"], ["status", "writer"], ["created_at", "2017-10-26 02:46:50.678019"], ["updated_at", "2017-10-26 02:46:50.678019"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user67@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user67"], ["email", "user67@test.com"], ["password_digest", "$2a$10$hg5tzQboFT23N1Ee6IS0IeiSfY6J9pMU28ZuR35QxfWKN39rhJznG"], ["role", 1], ["sex", "male"], ["phonenumber", "(315) 558-8834 x32237"], ["status", "statistician"], ["created_at", "2017-10-26 02:46:50.741916"], ["updated_at", "2017-10-26 02:46:50.741916"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user68@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user68"], ["email", "user68@test.com"], ["password_digest", "$2a$10$cnLzMm4XIbxCnfj/nTJ2z.xa62qFfzh0pNrlp.uhrW2ZMoOFwPgaW"], ["role", 2], ["sex", "female"], ["phonenumber", "581.259.5840 x12475"], ["status", "writer"], ["created_at", "2017-10-26 02:46:50.809704"], ["updated_at", "2017-10-26 02:46:50.809704"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user69@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user69"], ["email", "user69@test.com"], ["password_digest", "$2a$10$VGdNnyeIuvVSLOieHThUuOdst7NfzfdFfAmHY3JIkACm2jhUMgYX."], ["role", 1], ["sex", "male"], ["phonenumber", "(251) 961-8041"], ["status", "writer"], ["created_at", "2017-10-26 02:46:50.876470"], ["updated_at", "2017-10-26 02:46:50.876470"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user70@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user70"], ["email", "user70@test.com"], ["password_digest", "$2a$10$5W.KWBwW8CNTb8DrdLtyzeQs6UhdHVRXJeAsElfJUmffg1KKDeeDq"], ["role", 3], ["sex", "male"], ["phonenumber", "1-719-040-9804 x557"], ["status", "actor"], ["created_at", "2017-10-26 02:46:50.935510"], ["updated_at", "2017-10-26 02:46:50.935510"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user71@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user71"], ["email", "user71@test.com"], ["password_digest", "$2a$10$UFMSM3k/wChaDQKeV8pNZeOtAsQgtIWh534TKKpccchkXWvk8kS/i"], ["role", 3], ["sex", "female"], ["phonenumber", "1-347-776-0594"], ["status", "statistician"], ["created_at", "2017-10-26 02:46:51.001087"], ["updated_at", "2017-10-26 02:46:51.001087"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user72@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user72"], ["email", "user72@test.com"], ["password_digest", "$2a$10$1q6dvO1nfXYNErsOlnM/AumYVSEsxOtRLHblUE48a32IphQlJnPf2"], ["role", 2], ["sex", "male"], ["phonenumber", "(218) 718-9634 x74569"], ["status", "architect"], ["created_at", "2017-10-26 02:46:51.063297"], ["updated_at", "2017-10-26 02:46:51.063297"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user73@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user73"], ["email", "user73@test.com"], ["password_digest", "$2a$10$SrAUJ9mc3zhwAiQNRy9zmuy4Tm4LbwYydePFsiyxh8D.9rwv7UCjS"], ["role", 2], ["sex", "female"], ["phonenumber", "183-025-1018 x77931"], ["status", "attorney at law"], ["created_at", "2017-10-26 02:46:51.121466"], ["updated_at", "2017-10-26 02:46:51.121466"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user74@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user74"], ["email", "user74@test.com"], ["password_digest", "$2a$10$gDV2AiR3b6rGsDdqagnIReAGQxJGDZaA/rLYMJ.ccKs5EIKkOxXhm"], ["role", 3], ["sex", "female"], ["phonenumber", "1-369-289-8559 x4401"], ["status", "judge"], ["created_at", "2017-10-26 02:46:51.182878"], ["updated_at", "2017-10-26 02:46:51.182878"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user75@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user75"], ["email", "user75@test.com"], ["password_digest", "$2a$10$vD2mokCH.2R80exsnxyvp.VzeqJ2xdfbw8iqQ75buYgxbndA4mCje"], ["role", 4], ["sex", "female"], ["phonenumber", "(497) 211-7180"], ["status", "agriculturist"], ["created_at", "2017-10-26 02:46:51.247418"], ["updated_at", "2017-10-26 02:46:51.247418"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user76@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user76"], ["email", "user76@test.com"], ["password_digest", "$2a$10$Rmkgb42qfXLjJyGObVGcseyqW8BKHozAhCF/.4irb0cDLsZeKCfxu"], ["role", 3], ["sex", "female"], ["phonenumber", "696-832-2263 x33792"], ["status", "attorney at law"], ["created_at", "2017-10-26 02:46:51.313066"], ["updated_at", "2017-10-26 02:46:51.313066"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user77@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user77"], ["email", "user77@test.com"], ["password_digest", "$2a$10$bT6KO0zVnLHgitAQGuTpvulSwvJ//ua416tXscyqb3LPyZ6WueQrm"], ["role", 2], ["sex", "female"], ["phonenumber", "(978) 862-0502"], ["status", "economist"], ["created_at", "2017-10-26 02:46:51.377722"], ["updated_at", "2017-10-26 02:46:51.377722"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user78@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user78"], ["email", "user78@test.com"], ["password_digest", "$2a$10$nJRqYEKy.ZUutjtwn3ZvhOFHWPC06dzBpxW612CAYY7GqlLvKoXta"], ["role", 3], ["sex", "female"], ["phonenumber", "332.798.3262"], ["status", "doctor"], ["created_at", "2017-10-26 02:46:51.435324"], ["updated_at", "2017-10-26 02:46:51.435324"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user79@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user79"], ["email", "user79@test.com"], ["password_digest", "$2a$10$ry/oKv7.BQiGf7MDC3JdBemUdkGVqGjHWa.OmF/6TPEHWOCe6xAvi"], ["role", 4], ["sex", "male"], ["phonenumber", "425.609.0069"], ["status", "firefighter"], ["created_at", "2017-10-26 02:46:51.497725"], ["updated_at", "2017-10-26 02:46:51.497725"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user80@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user80"], ["email", "user80@test.com"], ["password_digest", "$2a$10$PE.xyyNC2B8itkC6Iup9SuG3f2bkUOMsJzxHPzwu8aj0tmxlNM6da"], ["role", 3], ["sex", "male"], ["phonenumber", "325-858-0512 x2701"], ["status", "architect"], ["created_at", "2017-10-26 02:46:51.554503"], ["updated_at", "2017-10-26 02:46:51.554503"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user81@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user81"], ["email", "user81@test.com"], ["password_digest", "$2a$10$SYXJPHjwxJmjDrKP1iP5O.phxpeWKdsFot88IZmtNIEccGp8mAb56"], ["role", 3], ["sex", "male"], ["phonenumber", "948.706.7538 x3274"], ["status", "physicist"], ["created_at", "2017-10-26 02:46:51.618141"], ["updated_at", "2017-10-26 02:46:51.618141"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user82@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user82"], ["email", "user82@test.com"], ["password_digest", "$2a$10$1gDvmDd.P9NX58upDtWPEO.srq3u8fwTiQ/N3ocZrWidYrgEpIcW."], ["role", 1], ["sex", "female"], ["phonenumber", "685.822.4041 x6700"], ["status", "human resources"], ["created_at", "2017-10-26 02:46:51.678791"], ["updated_at", "2017-10-26 02:46:51.678791"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user83@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user83"], ["email", "user83@test.com"], ["password_digest", "$2a$10$V3TViMhOJ6GhstF8C33OcO23fs098GAIaPgdyew60lPnDHxdJHkqm"], ["role", 3], ["sex", "female"], ["phonenumber", "1-952-201-2015 x49958"], ["status", "doctor"], ["created_at", "2017-10-26 02:46:51.737799"], ["updated_at", "2017-10-26 02:46:51.737799"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user84@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user84"], ["email", "user84@test.com"], ["password_digest", "$2a$10$bN0j.spRlbLrAlIkuq6rueB0u3lAAfevMXgLAFg/w/Y3hdZa7xIgS"], ["role", 4], ["sex", "female"], ["phonenumber", "590-576-2286 x1387"], ["status", "firefighter"], ["created_at", "2017-10-26 02:46:51.801815"], ["updated_at", "2017-10-26 02:46:51.801815"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user85@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user85"], ["email", "user85@test.com"], ["password_digest", "$2a$10$NcuJYeLUfK/zQgxyoBSYQu5JvvGBgaW7l65fLSMoI7olc6/3tKine"], ["role", 1], ["sex", "female"], ["phonenumber", "296-123-3111"], ["status", "philosopher"], ["created_at", "2017-10-26 02:46:51.859352"], ["updated_at", "2017-10-26 02:46:51.859352"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user86@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user86"], ["email", "user86@test.com"], ["password_digest", "$2a$10$PZFYwoP6qd0LidzheYG3jetYlAX7PwI3VqzxAo1BmLVe2KWg4xMxC"], ["role", 4], ["sex", "female"], ["phonenumber", "874.502.5384"], ["status", "teacher"], ["created_at", "2017-10-26 02:46:51.916482"], ["updated_at", "2017-10-26 02:46:51.916482"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user87@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user87"], ["email", "user87@test.com"], ["password_digest", "$2a$10$w0M8uns0y00qz0MH55qiI.vsaMlaeF13Ub/hDjeVfC5DybRrUmhMK"], ["role", 1], ["sex", "male"], ["phonenumber", "774.467.4405"], ["status", "accountant"], ["created_at", "2017-10-26 02:46:51.977939"], ["updated_at", "2017-10-26 02:46:51.977939"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user88@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user88"], ["email", "user88@test.com"], ["password_digest", "$2a$10$ZwGO2heQ/Krw33hb1LQVR.s0BOXn2ldHRy3LSD.Snq6p/5PtRm6Yq"], ["role", 2], ["sex", "male"], ["phonenumber", "(906) 716-9335"], ["status", "engineer"], ["created_at", "2017-10-26 02:46:52.038114"], ["updated_at", "2017-10-26 02:46:52.038114"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user89@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user89"], ["email", "user89@test.com"], ["password_digest", "$2a$10$VeltxVBA47rPakfOgRr7VujCUpGzjaPwwN39dwY8XKPgbRSkB65AW"], ["role", 4], ["sex", "male"], ["phonenumber", "1-599-786-4639 x43301"], ["status", "engineer"], ["created_at", "2017-10-26 02:46:52.096493"], ["updated_at", "2017-10-26 02:46:52.096493"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user90@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user90"], ["email", "user90@test.com"], ["password_digest", "$2a$10$H8Rws7QRBy1Dlpd.UyhDUepBOGAS9Hw9m8wB2v.l/Wh56ZYXGwjhG"], ["role", 4], ["sex", "female"], ["phonenumber", "970.273.0378 x4511"], ["status", "designer"], ["created_at", "2017-10-26 02:46:52.155271"], ["updated_at", "2017-10-26 02:46:52.155271"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user91@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user91"], ["email", "user91@test.com"], ["password_digest", "$2a$10$uGMUu6cyT7x0dbvl6.GBBOR1lX6wzdw0x0IX.maLtSjuvJ004aicq"], ["role", 1], ["sex", "male"], ["phonenumber", "(985) 302-9393 x280"], ["status", "astronomer"], ["created_at", "2017-10-26 02:46:52.215987"], ["updated_at", "2017-10-26 02:46:52.215987"]]
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user92@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user92"], ["email", "user92@test.com"], ["password_digest", "$2a$10$FB1NUOsqT9homuOCmPRy3eQu4QbRb.OBb62EXtsgpwBkbZbjtsq/C"], ["role", 4], ["sex", "female"], ["phonenumber", "932-355-6554 x94919"], ["status", "chemist"], ["created_at", "2017-10-26 02:46:52.277584"], ["updated_at", "2017-10-26 02:46:52.277584"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user93@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user93"], ["email", "user93@test.com"], ["password_digest", "$2a$10$z3EIQiYehenBExUvH2wrTutkrDIr2HRGXozdIEM/XlcG6b5Zk/eQS"], ["role", 4], ["sex", "male"], ["phonenumber", "(101) 313-6694 x1529"], ["status", "accountant"], ["created_at", "2017-10-26 02:46:52.337296"], ["updated_at", "2017-10-26 02:46:52.337296"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user94@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user94"], ["email", "user94@test.com"], ["password_digest", "$2a$10$mEa9ZmyxMGZtKP5ZubFJ/eEjJ.NIkgxlcGWuoU.55PMGZqOQvIpzS"], ["role", 4], ["sex", "female"], ["phonenumber", "1-721-135-0331 x65259"], ["status", "physicist"], ["created_at", "2017-10-26 02:46:52.393982"], ["updated_at", "2017-10-26 02:46:52.393982"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user95@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user95"], ["email", "user95@test.com"], ["password_digest", "$2a$10$dk5qNzlhsY4DItPbzu7bru.SdMmA/oKbOC5d9qEvaijZK1hxg6bdq"], ["role", 1], ["sex", "male"], ["phonenumber", "1-291-448-6915 x087"], ["status", "biologist"], ["created_at", "2017-10-26 02:46:52.455281"], ["updated_at", "2017-10-26 02:46:52.455281"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user96@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user96"], ["email", "user96@test.com"], ["password_digest", "$2a$10$2ij0M8uyYe4qFQN1dMVxxuivm9HU5w3b1Elo9Xwvz290r.iijZ8.C"], ["role", 2], ["sex", "male"], ["phonenumber", "474.162.1075"], ["status", "biologist"], ["created_at", "2017-10-26 02:46:52.517569"], ["updated_at", "2017-10-26 02:46:52.517569"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user97@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user97"], ["email", "user97@test.com"], ["password_digest", "$2a$10$Oj68/hcq5A0Cw.DfACv.6uTp60ab9z3XrbrXo1dsIhjwMDfl3xXwa"], ["role", 2], ["sex", "male"], ["phonenumber", "149.798.7909 x711"], ["status", "librarian"], ["created_at", "2017-10-26 02:46:52.579783"], ["updated_at", "2017-10-26 02:46:52.579783"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user98@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user98"], ["email", "user98@test.com"], ["password_digest", "$2a$10$dMZAyIVc2AGOmqklsjiajOHbgnFUqWhOQReb81Bd/Y6978RZgXlGy"], ["role", 1], ["sex", "male"], ["phonenumber", "980.735.2028"], ["status", "librarian"], ["created_at", "2017-10-26 02:46:52.636306"], ["updated_at", "2017-10-26 02:46:52.636306"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user99@test.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user99"], ["email", "user99@test.com"], ["password_digest", "$2a$10$1FxO8Z7NnKWBj37qqt5tseN3VHBcSx5FVd/Q22Jgnhwbph/bWDdOi"], ["role", 2], ["sex", "male"], ["phonenumber", "1-732-425-2251 x283"], ["status", "writer"], ["created_at", "2017-10-26 02:46:52.702267"], ["updated_at", "2017-10-26 02:46:52.702267"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user100@test.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("name", "email", "password_digest", "role", "sex", "phonenumber", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["name", "user100"], ["email", "user100@test.com"], ["password_digest", "$2a$10$4Ew8uRTyjBwilCifjh1QcOWWDRKKB50xm6cM6lJmXQjSOUUGHtV7C"], ["role", 1], ["sex", "female"], ["phonenumber", "921.838.0787 x4103"], ["status", "judge"], ["created_at", "2017-10-26 02:46:52.763015"], ["updated_at", "2017-10-26 02:46:52.763015"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendships" ("friend_id", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["friend_id", 2], ["user_id", 1], ["created_at", "2017-10-26 02:46:52.785091"], ["updated_at", "2017-10-26 02:46:52.785091"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendships" ("friend_id", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["friend_id", 3], ["user_id", 1], ["created_at", "2017-10-26 02:46:52.788252"], ["updated_at", "2017-10-26 02:46:52.788252"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m


Started GET "/" for ::1 at 2017-10-26 10:46:55 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (4.6ms)
Completed 500 Internal Server Error in 8567ms (ActiveRecord: 0.0ms)

ActionView::Template::Error ():
    2: <html>
    3: <head>
    4:   <title>RailsChat!</title>
    5:   <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>
    6:   <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    7:   <%= include_sync_config %>
    8:   <meta>
  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__2435268709139731054_70358797904340'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (61.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (45.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (100.7ms)


Started GET "/" for ::1 at 2017-10-26 10:47:12 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (6.4ms)
  Rendered layouts/_login_panel.html.erb (9.9ms)
  Rendered layouts/_header.html.erb (13.8ms)
  Rendered layouts/_content.html.erb (0.5ms)
Completed 200 OK in 830ms (Views: 820.9ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.self-615bd684f11ed92057f3f5249dbb04a7a7678b57b4a641d5c09e06f4dc910392.css?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/bootstrap.min.self-504d59678f10d79a661b6cecdce5b8c1d5bfd98e860614584c0a40399552d61f.js?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/bootstrap.file-input.self-467aac2b264df4efd6b902977182473cd79513a25b2028999facfa8ab1133fec.js?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/sync.self-570ed504e84206f050c8bc30d052d71600f341b859ea362960c1fc810fcbb46a.js?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/select2.min.self-29080377793c2a531be0bad7d46aa3fcf1ede0008ebf68b1e4f97927f368ac38.js?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/toastr.min.self-d1e748daa450eccf497f106231f0e799b278d085d431d75f1df5eef9968808bd.js?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/application.self-10ad0916cf31256fe71785e8dc9cc297a96b1cdf7b74aeb61711199b9a3d003f.js?body=1" for ::1 at 2017-10-26 10:47:13 +0800


Started GET "/assets/bootstrap/glyphicons-halflings-regular-fe185d11a49676890d47bb783312a0cda5a44c4039214094e7957b4c040ef11c.woff2" for ::1 at 2017-10-26 10:47:18 +0800


Started POST "/sessions/login" for ::1 at 2017-10-26 10:47:25 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SnDRNHU9Hrf+PJ6Z2xU51oK2CsSI9twZGvxgq/XiK6xN89Gf1t+4/KCHraHGdZVh9VTVMFoah5BlY7pRQqooog==", "session"=>{"email"=>"123123@123.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "123123@123.com"]]
Redirected to http://localhost:3000/
Completed 302 Found in 24ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2017-10-26 10:47:25 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 32.7ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2017-10-26 10:50:06 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (1.4ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 45.2ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2017-10-26 10:50:07 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 54ms (Views: 52.9ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-26 10:50:12 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"IycNhG3NMuCRhqgBfSMRs6RHSG7TO7i5anTkPjXLvEQkpA0vzi+Uq889mzlgQ70E06WXmgHX4zAV6z7EgoO/Sg==", "session"=>{"email"=>"123123@123.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "123123@123.com"]]
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-26 10:50:12 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 44ms (Views: 43.2ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-26 10:50:35 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TcUfPGURj2hqptC7Q0RyZvl9CFqo7dM60EhZ4I4PB8JKRh+XxvMpIzQd44NeJN7Rjp/XrnoBiLOv14MaOUcEzA==", "session"=>{"email"=>"user1@test.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "user1@test.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 71ms (ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2017-10-26 10:50:35 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 27.8ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-26 10:51:36 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 49ms (Views: 49.1ms | ActiveRecord: 0.0ms)


Started GET "/assets/application.self-615bd684f11ed92057f3f5249dbb04a7a7678b57b4a641d5c09e06f4dc910392.css?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8b42e4c0073393abee.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/jquery_ujs.self-784a997f6726036b1993eb2217c9cb558e1cbb801c6da88105588c56f13b466a.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/turbolinks.self-1d1fddf91adc38ac2045c51f0a3e05ca97d07d24d15a4dcbf705009106489e69.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/bootstrap.min.self-504d59678f10d79a661b6cecdce5b8c1d5bfd98e860614584c0a40399552d61f.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/bootstrap.file-input.self-467aac2b264df4efd6b902977182473cd79513a25b2028999facfa8ab1133fec.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/sync.self-570ed504e84206f050c8bc30d052d71600f341b859ea362960c1fc810fcbb46a.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/select2.min.self-29080377793c2a531be0bad7d46aa3fcf1ede0008ebf68b1e4f97927f368ac38.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/application.self-10ad0916cf31256fe71785e8dc9cc297a96b1cdf7b74aeb61711199b9a3d003f.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/toastr.min.self-d1e748daa450eccf497f106231f0e799b278d085d431d75f1df5eef9968808bd.js?body=1" for ::1 at 2017-10-26 10:51:36 +0800


Started GET "/assets/bootstrap/glyphicons-halflings-regular-fe185d11a49676890d47bb783312a0cda5a44c4039214094e7957b4c040ef11c.woff2" for ::1 at 2017-10-26 10:51:39 +0800


Started POST "/sessions/login" for ::1 at 2017-10-26 10:51:53 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+N3d6vL8/8ROgno6GjbZqNP2C0Kd2E1L7RYknAkrL6t8u/OSCmUeZITcNVPRyFddoqYzvsCKApvHtap/80oJWQ==", "session"=>{"email"=>"user2@test.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "user2@test.com"]]
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 60ms (ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2017-10-26 10:51:53 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 42ms (Views: 41.2ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-26 10:51:58 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.7ms)
  Rendered chats/_navside.html.erb (18.6ms)
  Rendered chats/index.html.erb within layouts/application (20.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 81ms (Views: 50.7ms | ActiveRecord: 0.9ms)


Started GET "/assets/user-icon-59b0a754a338d30a655e86d27205a3c685c0c9b10d77e3a997dcf2bca92c9b1b.png" for ::1 at 2017-10-26 10:51:58 +0800


Started POST "/chats" for ::1 at 2017-10-26 10:52:03 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"549o0vu5+1mzM1Y5z8QXBQxu8aoCimHxbZTizKJ5ooVj6UaqAyAa+XltGVAEOpnwfT7JVl/YLiFHN2wvWBiEdw==", "users"=>"1", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user2@test.com') AND "users"."id" != 2) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "chats" ("admin_id", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["admin_id", 2], ["name", "user1-user2"], ["created_at", "2017-10-26 02:52:03.301013"], ["updated_at", "2017-10-26 02:52:03.301013"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "chats_users" ("user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-26 02:52:03.303402"], ["updated_at", "2017-10-26 02:52:03.303402"]]
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "chats_users" ("user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["user_id", 2], ["chat_id", 1], ["created_at", "2017-10-26 02:52:03.304543"], ["updated_at", "2017-10-26 02:52:03.304543"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 42ms (ActiveRecord: 2.3ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  Rendered chats/_chat_info.html.erb (2.9ms)
  Rendered chats/show.html.erb within layouts/application (13.0ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 62ms (Views: 50.3ms | ActiveRecord: 1.3ms)


Started POST "/messages" for ::1 at 2017-10-26 10:52:06 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123"], ["user_id", 2], ["chat_id", 1], ["created_at", "2017-10-26 02:52:06.599578"], ["updated_at", "2017-10-26 02:52:06.599578"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 9ms (ActiveRecord: 1.2ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (12.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 45ms (Views: 39.9ms | ActiveRecord: 0.6ms)


Started GET "/chats" for ::1 at 2017-10-26 10:52:09 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  Rendered chats/index.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 34.5ms | ActiveRecord: 0.4ms)


Started GET "/assets/user-icon-59b0a754a338d30a655e86d27205a3c685c0c9b10d77e3a997dcf2bca92c9b1b.png" for ::1 at 2017-10-26 10:52:09 +0800


Started POST "/chats" for ::1 at 2017-10-26 10:52:12 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"N8xM+S24UM/x1bu/f0vVa39FeADAqhJhOYfWhmYqBLowT0xSjlr2hK9uiIdiK3ncCKen9BJGSehGGAx80WIHtA==", "users"=>"2", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:12 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (10.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 48ms (Views: 43.6ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-26 10:52:18 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 2], ["chat_id", 1], ["created_at", "2017-10-26 02:52:18.515168"], ["updated_at", "2017-10-26 02:52:18.515168"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 8ms (ActiveRecord: 1.2ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.2ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (15.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 49ms (Views: 43.4ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (7.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (21.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 65ms (Views: 60.4ms | ActiveRecord: 0.6ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (8.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (17.0ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 48ms (Views: 43.0ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-26 10:52:30 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-26 02:52:30.369183"], ["updated_at", "2017-10-26 02:52:30.369183"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 5ms (ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (15.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 47ms (Views: 41.4ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (20.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 58ms (Views: 54.0ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-26 10:52:45 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"1123123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "1123123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-26 02:52:45.270146"], ["updated_at", "2017-10-26 02:52:45.270146"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.4ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:45 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (20.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 53ms (Views: 46.5ms | ActiveRecord: 0.9ms)


Started POST "/messages" for ::1 at 2017-10-26 10:52:47 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-26 02:52:47.918338"], ["updated_at", "2017-10-26 02:52:47.918338"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.2ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (20.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 54ms (Views: 48.2ms | ActiveRecord: 0.8ms)


Started POST "/messages" for ::1 at 2017-10-26 10:52:55 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"1231231"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "1231231"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-26 02:52:55.271471"], ["updated_at", "2017-10-26 02:52:55.271471"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.3ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (28.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 61ms (Views: 54.8ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:52:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (22.0ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 53ms (Views: 48.0ms | ActiveRecord: 0.6ms)


Started GET "/" for ::1 at 2017-10-26 10:53:14 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 39.0ms | ActiveRecord: 0.1ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (3.7ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (24.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 60ms (Views: 52.2ms | ActiveRecord: 4.3ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:35 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (2.2ms)
  Rendered chats/show.html.erb within layouts/application (29.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 65ms (Views: 60.3ms | ActiveRecord: 0.6ms)


Started PATCH "/chats/1/trans_auth" for ::1 at 2017-10-26 10:53:40 +0800
Processing by ChatsController#trans_auth as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dJF1ibFsxs71gR+pciM/qCzau6xr0mQZ4BzSZpTe1iXw91vxSfUnbj/fUMC53bFdXYqDUDaAK8nKv1yFbr/w1w==", "admin_id"=>"1", "commit"=>"确定", "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "chats" SET "admin_id" = ?, "updated_at" = ? WHERE "chats"."id" = ?[0m  [["admin_id", 1], ["updated_at", "2017-10-26 02:53:40.753102"], ["id", 1]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:40 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (22.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 56ms (Views: 51.0ms | ActiveRecord: 0.6ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (24.7ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 55ms (Views: 50.5ms | ActiveRecord: 0.7ms)


Started PATCH "/chats/1" for ::1 at 2017-10-26 10:53:49 +0800
Processing by ChatsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pkyE798GSSiXFOMy1tImhc/rUJqiVwnz14dtUUMo57Ohz4REfOTvY8mv0ArLsooyuAmPbnC7UnqoGLer9GDkvQ==", "chat"=>{"name"=>"123"}, "commit"=>"确定", "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "chats" SET "name" = ?, "updated_at" = ? WHERE "chats"."id" = ?  [["name", "123"], ["updated_at", "2017-10-26 02:53:49.860243"], ["id", 1]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (26.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 63ms (Views: 59.0ms | ActiveRecord: 0.6ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (22.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 58ms (Views: 52.2ms | ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (21.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 54ms (Views: 49.2ms | ActiveRecord: 0.6ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (4.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (26.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 58ms (Views: 52.8ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (22.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.3ms)
Completed 200 OK in 56ms (Views: 51.4ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (22.5ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 58ms (Views: 53.1ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (22.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 55ms (Views: 49.2ms | ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (21.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 56ms (Views: 50.4ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (25.4ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 59ms (Views: 49.8ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:53:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (23.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 57ms (Views: 51.3ms | ActiveRecord: 0.7ms)


Started DELETE "/chats/1/delete_user?user_id=2" for ::1 at 2017-10-26 10:54:00 +0800
Processing by ChatsController#delete_user as HTML
  Parameters: {"authenticity_token"=>"BYWUpsTOBTHRacfTKF4Ead496olUyL7IUXP4sxyYvpaB47rePFfkkRs3iLrjoIqcr23SdQma8Rh70HZQ5vmYZA==", "user_id"=>"2", "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."chat_id" = ? AND "chats_users"."user_id" = 2  [["chat_id", 1]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 2]]
Redirected to http://localhost:3000/chats
Filter chain halted as :correct_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/chats" for ::1 at 2017-10-26 10:54:00 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  Rendered chats/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 35.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (25.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 60ms (Views: 54.5ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (25.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 62ms (Views: 56.7ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (24.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 58ms (Views: 51.8ms | ActiveRecord: 0.8ms)


Started POST "/chats" for ::1 at 2017-10-26 10:54:13 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gynf2RezLSt2nqk/3DOy4/hSW8PqhGASqqEhhGNCcB4HT/Gh7yrMi7zA5lYXzTwWiQJjP7fWL8KAAq9nmSNW7A==", "users"=>"1", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 1) LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user2@test.com') AND "users"."id" != 2) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "chats" ("admin_id", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["admin_id", 2], ["name", "user1-user2"], ["created_at", "2017-10-26 02:54:13.784021"], ["updated_at", "2017-10-26 02:54:13.784021"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "chats_users" ("user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-26 02:54:13.785544"], ["updated_at", "2017-10-26 02:54:13.785544"]]
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "chats_users" ("user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 02:54:13.786869"], ["updated_at", "2017-10-26 02:54:13.786869"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 13ms (ActiveRecord: 2.8ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  Rendered chats/_chat_info.html.erb (1.6ms)
  Rendered chats/show.html.erb within layouts/application (8.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 44ms (Views: 39.8ms | ActiveRecord: 0.4ms)


Started POST "/messages" for ::1 at 2017-10-26 10:54:17 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 02:54:17.897472"], ["updated_at", "2017-10-26 02:54:17.897472"]]
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.8ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (10.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 41ms (Views: 36.0ms | ActiveRecord: 0.6ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:20 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (22.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 54ms (Views: 49.0ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:21 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (7.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (14.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 50ms (Views: 42.6ms | ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (5.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (29.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 67ms (Views: 58.3ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (11.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 55ms (Views: 43.4ms | ActiveRecord: 1.1ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.9ms)
  Rendered chats/show.html.erb within layouts/application (28.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 83ms (Views: 75.2ms | ActiveRecord: 0.8ms)


Started POST "/chats" for ::1 at 2017-10-26 10:54:32 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wroLXiod1fWNCRnpqmhXy8x0IXxHYq9FmQhqZZ+tvAvFOQv1if9zvtOyKtG3CPt8u5b+iJWO9Mzml7CfKOW/BQ==", "users"=>"3", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (7.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (2.2ms)
  Rendered chats/show.html.erb within layouts/application (37.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 81ms (Views: 75.1ms | ActiveRecord: 1.1ms)


Started POST "/messages" for ::1 at 2017-10-26 10:54:35 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"234234"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "234234"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-26 02:54:35.838028"], ["updated_at", "2017-10-26 02:54:35.838028"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 5ms (ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-26 10:54:35 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (26.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 59ms (Views: 53.9ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:42 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (10.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 47ms (Views: 40.6ms | ActiveRecord: 0.7ms)


Started POST "/messages" for ::1 at 2017-10-26 10:54:46 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-26 02:54:46.345950"], ["updated_at", "2017-10-26 02:54:46.345950"]]
  [1m[35m (2.2ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.7ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:46 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (8.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (18.0ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 52ms (Views: 45.9ms | ActiveRecord: 0.9ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:54:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (13.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 44ms (Views: 39.9ms | ActiveRecord: 0.6ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-26 10:55:29 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (6.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (91.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (381.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (437.1ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:57:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (16.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 62ms (Views: 56.3ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:57:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (12.6ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 41.7ms | ActiveRecord: 0.6ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:57:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (12.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 40.6ms | ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2017-10-26 10:57:41 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 38ms (Views: 38.1ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-26 10:57:57 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wkFrwBvTnnilGpALSC1g1k0FsBTrB8T9mHZBiAIaW8XjtRLYxO/o0BIqn+MGDqZXXAP5SQOOSjU1Rs52ZWIJyQ==", "session"=>{"email"=>"user2@test.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "user2@test.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 59ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2017-10-26 10:57:57 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 38.1ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-26 10:58:00 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  Rendered chats/index.html.erb within layouts/application (7.3ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 46ms (Views: 43.1ms | ActiveRecord: 0.3ms)


Started POST "/chats" for ::1 at 2017-10-26 10:58:03 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"qVo9pQaYayInXgRDXF5RgMkVHenDwnmWcJzZXd7ZUjyIrkS92aQdipBuC6sSfZcB2BNUtCtL917drFajuaEAMA==", "users"=>"1", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (2.0ms)
  Rendered chats/show.html.erb within layouts/application (16.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 49ms (Views: 45.2ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-26 10:58:05 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 02:58:05.782986"], ["updated_at", "2017-10-26 02:58:05.782986"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 1.8ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (2.1ms)
  Rendered chats/show.html.erb within layouts/application (19.6ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 54ms (Views: 47.8ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2F2697b0164b0fac4083d9ea079a5bb6712f486dd4&partial_name=message_row&resource_name=message&resource_id=10" for ::1 at 2017-10-26 10:58:05 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2697b0164b0fac4083d9ea079a5bb6712f486dd4", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"10"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 10]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/sync/refetch.json?auth_token=%2F2697b0164b0fac4083d9ea079a5bb6712f486dd4&partial_name=message_row&resource_name=message&resource_id=10" for ::1 at 2017-10-26 10:58:05 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2697b0164b0fac4083d9ea079a5bb6712f486dd4", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"10"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 10]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-26 10:58:07 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 02:58:07.981736"], ["updated_at", "2017-10-26 02:58:07.981736"]]
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.6ms)


Started GET "/sync/refetch.json?auth_token=%2Fb578f4ed019f88bd61e3ff6c8b9505c58b77eac8&partial_name=message_row&resource_name=message&resource_id=11" for ::1 at 2017-10-26 10:58:07 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/b578f4ed019f88bd61e3ff6c8b9505c58b77eac8", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"11"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.6ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.5ms)
  Rendered chats/show.html.erb within layouts/application (20.6ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 53ms (Views: 47.7ms | ActiveRecord: 0.7ms)


Started GET "/sync/refetch.json?auth_token=%2Fb578f4ed019f88bd61e3ff6c8b9505c58b77eac8&partial_name=message_row&resource_name=message&resource_id=11" for ::1 at 2017-10-26 10:58:08 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/b578f4ed019f88bd61e3ff6c8b9505c58b77eac8", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"11"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 11]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-26 10:58:10 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 02:58:10.397664"], ["updated_at", "2017-10-26 02:58:10.397664"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 2.1ms)


Started GET "/sync/refetch.json?auth_token=%2F689d501f4b2506e9feca99813f47932bb8d6e90b&partial_name=message_row&resource_name=message&resource_id=12" for ::1 at 2017-10-26 10:58:10 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/689d501f4b2506e9feca99813f47932bb8d6e90b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"12"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 12]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (26.0ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 59ms (Views: 53.8ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F689d501f4b2506e9feca99813f47932bb8d6e90b&partial_name=message_row&resource_name=message&resource_id=12" for ::1 at 2017-10-26 10:58:10 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/689d501f4b2506e9feca99813f47932bb8d6e90b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"12"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 12]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-26 10:58:14 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"1231231"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "1231231"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-26 02:58:14.235268"], ["updated_at", "2017-10-26 02:58:14.235268"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (23.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 60ms (Views: 54.0ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2F5056abb47c8e8a9dcb46e9432793e203d886efa9&partial_name=message_row&resource_name=message&resource_id=13" for ::1 at 2017-10-26 10:58:14 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/5056abb47c8e8a9dcb46e9432793e203d886efa9", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"13"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 13]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F5056abb47c8e8a9dcb46e9432793e203d886efa9&partial_name=message_row&resource_name=message&resource_id=13" for ::1 at 2017-10-26 10:58:14 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/5056abb47c8e8a9dcb46e9432793e203d886efa9", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"13"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 13]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-26 10:58:17 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 02:58:17.549809"], ["updated_at", "2017-10-26 02:58:17.549809"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 2.2ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (32.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 67ms (Views: 61.6ms | ActiveRecord: 0.7ms)


Started GET "/sync/refetch.json?auth_token=%2F35359971514e1aa4ffd31cb6efb5b8693462488a&partial_name=message_row&resource_name=message&resource_id=14" for ::1 at 2017-10-26 10:58:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/35359971514e1aa4ffd31cb6efb5b8693462488a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"14"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 14]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.9ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F35359971514e1aa4ffd31cb6efb5b8693462488a&partial_name=message_row&resource_name=message&resource_id=14" for ::1 at 2017-10-26 10:58:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/35359971514e1aa4ffd31cb6efb5b8693462488a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"14"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 14]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-26 10:58:20 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"12312312312"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "12312312312"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-26 02:58:20.765761"], ["updated_at", "2017-10-26 02:58:20.765761"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.5ms)


Started GET "/chats/2" for ::1 at 2017-10-26 10:58:20 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (26.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 56ms (Views: 51.0ms | ActiveRecord: 0.6ms)


Started GET "/sync/refetch.json?auth_token=%2F0c5d84e4aa99124ad3ee651caf839468570c880b&partial_name=message_row&resource_name=message&resource_id=15" for ::1 at 2017-10-26 10:58:20 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0c5d84e4aa99124ad3ee651caf839468570c880b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"15"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 15]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F0c5d84e4aa99124ad3ee651caf839468570c880b&partial_name=message_row&resource_name=message&resource_id=15" for ::1 at 2017-10-26 10:58:20 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0c5d84e4aa99124ad3ee651caf839468570c880b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"15"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 15]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2017-10-26 10:58:49 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 45.5ms | ActiveRecord: 0.1ms)


Started GET "/users/2" for ::1 at 2017-10-26 10:59:28 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.2ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (63.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (55.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (126.8ms)


Started DELETE "/sessions/logout" for ::1 at 2017-10-26 10:59:34 +0800
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ov1PVwxpDX+5WmzjQkoLU0nSFFDj6Z+ayU3uehGj0qKDCTZP01V71w5qYwsMac3SWNRdDQtgEVJkfWGEdtuArg=="}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2017-10-26 10:59:34 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 57ms (Views: 56.1ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-26 10:59:52 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"r33klZQVAgINkno/OUFYsVMNPuKe19O6FIaN8nNIMEaOiZ2NSyl0qrqiddd3Yp4wQgt3v3ZeXXK5tgIMFDBiSg==", "session"=>{"email"=>"user2@test.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "user2@test.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 58ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2017-10-26 10:59:52 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 25.0ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-26 10:59:56 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.7ms)
  Rendered chats/index.html.erb within layouts/application (6.8ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 38ms (Views: 34.6ms | ActiveRecord: 0.4ms)


Started GET "/users/1" for ::1 at 2017-10-26 11:00:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
Redirected to http://localhost:3000/users/2
Filter chain halted as :correct_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/users/2" for ::1 at 2017-10-26 11:00:00 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.1ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (55.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (44.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (98.6ms)


Started POST "/chats" for ::1 at 2017-10-26 11:00:03 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MywRXkXk3vtUHn/Jm7S8v78R4tBi5LDJQI0Hz86/TQAS2GhGmtioU+MucCHVl3o+rherjYptPgHtvYgxqccfDA==", "users"=>"1", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-26 11:00:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (35.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 74ms (Views: 70.0ms | ActiveRecord: 0.7ms)


Started POST "/messages" for ::1 at 2017-10-26 11:00:07 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 03:00:07.882056"], ["updated_at", "2017-10-26 03:00:07.882056"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.4ms)


Started GET "/sync/refetch.json?auth_token=%2F321377923babc58dcc5e26f6a1cebd899fc52a56&partial_name=message_row&resource_name=message&resource_id=16" for ::1 at 2017-10-26 11:00:07 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/321377923babc58dcc5e26f6a1cebd899fc52a56", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"16"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 16]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-26 11:00:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (35.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 69ms (Views: 63.3ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F321377923babc58dcc5e26f6a1cebd899fc52a56&partial_name=message_row&resource_name=message&resource_id=16" for ::1 at 2017-10-26 11:00:07 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/321377923babc58dcc5e26f6a1cebd899fc52a56", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"16"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 16]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-26 11:00:11 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 03:00:11.028790"], ["updated_at", "2017-10-26 03:00:11.028790"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.5ms)


Started GET "/chats/2" for ::1 at 2017-10-26 11:00:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (32.9ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 62ms (Views: 57.6ms | ActiveRecord: 0.6ms)


Started GET "/sync/refetch.json?auth_token=%2F6adadc1ae64135eadd2eb5a0d493524beafd0f5d&partial_name=message_row&resource_name=message&resource_id=17" for ::1 at 2017-10-26 11:00:11 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6adadc1ae64135eadd2eb5a0d493524beafd0f5d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"17"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 17]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F6adadc1ae64135eadd2eb5a0d493524beafd0f5d&partial_name=message_row&resource_name=message&resource_id=17" for ::1 at 2017-10-26 11:00:11 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6adadc1ae64135eadd2eb5a0d493524beafd0f5d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"17"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 17]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-26 11:00:13 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-26 03:00:13.028415"], ["updated_at", "2017-10-26 03:00:13.028415"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.6ms)


Started GET "/sync/refetch.json?auth_token=%2F4b86a6bc243845e1493890cd66e91cff8731f133&partial_name=message_row&resource_name=message&resource_id=18" for ::1 at 2017-10-26 11:00:13 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/4b86a6bc243845e1493890cd66e91cff8731f133", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"18"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 18]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.5ms)
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-26 11:00:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (34.9ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 66ms (Views: 60.6ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F4b86a6bc243845e1493890cd66e91cff8731f133&partial_name=message_row&resource_name=message&resource_id=18" for ::1 at 2017-10-26 11:00:13 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/4b86a6bc243845e1493890cd66e91cff8731f133", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"18"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 18]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-26 11:02:36 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 46ms (Views: 45.7ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-26 11:02:41 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  Rendered chats/index.html.erb within layouts/application (5.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 44ms (Views: 39.3ms | ActiveRecord: 0.5ms)


Started POST "/chats" for ::1 at 2017-10-26 11:02:44 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LfvaKkDhcj6Y2IouuCFJeXG0w1h/wFjPcIImjbPh0xYMD6Myn90Eli/ohcb2Ao/4YLKKBZdJ1gfdsqlz1JmBGg==", "users"=>"1", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-26 11:02:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.6ms)
  Rendered chats/show.html.erb within layouts/application (37.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 70ms (Views: 65.2ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 10:34:43 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.5ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.2ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.6ms)
  Rendered chats/_navside.html.erb (324.7ms)
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (10.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
  Rendered chats/_chat_info.html.erb (2.6ms)
  Rendered chats/show.html.erb within layouts/application (428.4ms)
  Rendered layouts/_login_panel.html.erb (8.1ms)
  Rendered layouts/_header.html.erb (11.5ms)
  Rendered layouts/_content.html.erb (1.1ms)
Completed 200 OK in 629ms (Views: 543.0ms | ActiveRecord: 5.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 10:35:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (10.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (46.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 97ms (Views: 89.5ms | ActiveRecord: 0.9ms)


Started POST "/messages" for ::1 at 2017-10-27 10:36:05 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
Can't verify CSRF token authenticity
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)

ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'
  activesupport (4.2.10) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.10) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (54.4ms)


Started POST "/messages" for ::1 at 2017-10-27 10:36:11 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
Can't verify CSRF token authenticity
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)

ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'
  activesupport (4.2.10) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.10) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (41.4ms)


Started POST "/messages" for ::1 at 2017-10-27 10:36:11 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
Can't verify CSRF token authenticity
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)

ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'
  activesupport (4.2.10) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.10) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (41.0ms)


Started DELETE "/sessions/logout" for ::1 at 2017-10-27 10:36:13 +0800
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"CG6FZbpOlEeceejuGs07TtmUwj8/TqN/EpbqSzdMTkEpmvx9ZXLi7ytJ5wZU7v3PyJKLYtfHLbe/pmW1UDQcTQ=="}
Can't verify CSRF token authenticity
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)

ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'
  actionpack (4.2.10) lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'
  activesupport (4.2.10) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.10) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.10) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (56.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (374.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (430.8ms)


Started GET "/" for ::1 at 2017-10-27 10:36:22 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (4.4ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 50ms (Views: 49.3ms | ActiveRecord: 0.0ms)


Started GET "/" for ::1 at 2017-10-27 10:36:22 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 30ms (Views: 29.3ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-27 10:36:38 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Ei22AgHoiG89STO287D/I7SqSmaXolgsb5h564xOVXXg4tiRzYKZgHZSK4XGZIGsIPun6NMSz7/WLuWRrV9esA==", "session"=>{"email"=>"user2@test.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "user2@test.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 61ms (ActiveRecord: 0.7ms)


Started GET "/" for ::1 at 2017-10-27 10:36:38 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered homes/home.html.erb within layouts/application (0.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 38.2ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-27 10:36:42 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.1ms)
  Rendered chats/index.html.erb within layouts/application (6.8ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 37ms (Views: 34.3ms | ActiveRecord: 0.3ms)


Started POST "/chats" for ::1 at 2017-10-27 10:36:44 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"CedQlrAbceYiNp3SipaO5FKu/iyckYtyLbgIMcih5iP7KD4FfHFgCWktheG/QvBrxv8TotghHOGUDpRL6bDt5g==", "users"=>"1", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 10:36:44 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (5.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.6ms)
  Rendered chats/show.html.erb within layouts/application (47.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 78ms (Views: 73.4ms | ActiveRecord: 0.9ms)


Started POST "/messages" for ::1 at 2017-10-27 10:36:47 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 02:36:47.516999"], ["updated_at", "2017-10-27 02:36:47.516999"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 11ms (ActiveRecord: 4.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 10:36:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (42.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 76ms (Views: 69.5ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F628a6ccd75fd81af72731b8f77d5891a3f4994d4&partial_name=message_row&resource_name=message&resource_id=19" for ::1 at 2017-10-27 10:36:47 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/628a6ccd75fd81af72731b8f77d5891a3f4994d4", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"19"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 19]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.7ms)
Completed 200 OK in 16ms (Views: 1.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F628a6ccd75fd81af72731b8f77d5891a3f4994d4&partial_name=message_row&resource_name=message&resource_id=19" for ::1 at 2017-10-27 10:36:47 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/628a6ccd75fd81af72731b8f77d5891a3f4994d4", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"19"}
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 19]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.6ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/messages" for ::1 at 2017-10-27 10:36:50 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 02:36:50.253995"], ["updated_at", "2017-10-27 02:36:50.253995"]]
  [1m[35m (0.7ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 1.6ms)


Started GET "/chats/2" for ::1 at 2017-10-27 10:36:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (44.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 78ms (Views: 73.7ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F1aefa42b5be997c412d4f37cac5cb99f2a120cd6&partial_name=message_row&resource_name=message&resource_id=20" for ::1 at 2017-10-27 10:36:50 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/1aefa42b5be997c412d4f37cac5cb99f2a120cd6", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"20"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 20]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F1aefa42b5be997c412d4f37cac5cb99f2a120cd6&partial_name=message_row&resource_name=message&resource_id=20" for ::1 at 2017-10-27 10:36:50 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/1aefa42b5be997c412d4f37cac5cb99f2a120cd6", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"20"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 20]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 10:36:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (47.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 84ms (Views: 76.1ms | ActiveRecord: 1.1ms)


Started GET "/chats" for ::1 at 2017-10-27 11:06:48 +0800
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.6ms)
  Rendered chats/_navside.html.erb (281.4ms)
  Rendered chats/index.html.erb within layouts/application (287.4ms)
  Rendered layouts/_login_panel.html.erb (6.9ms)
  Rendered layouts/_header.html.erb (10.1ms)
  Rendered layouts/_content.html.erb (0.7ms)
Completed 200 OK in 437ms (Views: 374.9ms | ActiveRecord: 1.3ms)


Started GET "/chats" for ::1 at 2017-10-27 11:06:51 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  Rendered chats/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 33.2ms | ActiveRecord: 0.2ms)


Started GET "/chats" for ::1 at 2017-10-27 11:06:53 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.3ms)
  Rendered chats/_navside.html.erb (6.5ms)
  Rendered chats/index.html.erb within layouts/application (7.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 69ms (Views: 65.9ms | ActiveRecord: 0.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:06:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (9.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  Rendered chats/_chat_info.html.erb (2.1ms)
  Rendered chats/show.html.erb within layouts/application (87.8ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 165ms (Views: 143.6ms | ActiveRecord: 1.4ms)


Started GET "/chats" for ::1 at 2017-10-27 11:07:03 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  Rendered chats/index.html.erb within layouts/application (5.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 32.7ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2017-10-27 11:07:11 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 31ms (Views: 30.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 11:07:15 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 31.2ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 11:07:16 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 35.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 11:07:21 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.6ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 52ms (Views: 49.4ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 11:09:27 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 33ms (Views: 32.6ms | ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2017-10-27 11:11:17 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 26ms (Views: 25.7ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-27 11:11:33 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  Rendered chats/index.html.erb within layouts/application (5.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 40ms (Views: 35.6ms | ActiveRecord: 0.4ms)


Started GET "/chats" for ::1 at 2017-10-27 11:12:53 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  Rendered chats/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 34ms (Views: 31.1ms | ActiveRecord: 0.3ms)


Started GET "/chats" for ::1 at 2017-10-27 11:12:53 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (9.8ms)
  Rendered chats/index.html.erb within layouts/application (10.9ms)
  Rendered layouts/_login_panel.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 48ms (Views: 44.7ms | ActiveRecord: 0.4ms)


Started GET "/users/2" for ::1 at 2017-10-27 11:12:58 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.1ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (54.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (325.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (381.0ms)


Started GET "/users/2" for ::1 at 2017-10-27 11:13:35 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.1ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (61.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (88.1ms)


Started GET "/chats" for ::1 at 2017-10-27 11:13:52 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.6ms)
  Rendered chats/_navside.html.erb (7.8ms)
  Rendered chats/index.html.erb within layouts/application (8.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 60ms (Views: 55.1ms | ActiveRecord: 0.3ms)


Started GET "/" for ::1 at 2017-10-27 11:17:55 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (1.2ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 50ms (Views: 49.0ms | ActiveRecord: 0.1ms)


Started GET "/show" for ::1 at 2017-10-27 11:18:02 +0800

ActionController::RoutingError (No route matches [GET] "/show"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (4.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (75.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (48.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (106.1ms)


Started GET "/users/1" for ::1 at 2017-10-27 11:18:06 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.3ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (49.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (35.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (79.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:28:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (42.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 88ms (Views: 82.9ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-27 11:28:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (26.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 66ms (Views: 58.9ms | ActiveRecord: 0.8ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:28:35 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (6.7ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (48.5ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 99ms (Views: 89.8ms | ActiveRecord: 1.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 11:28:36 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (12.6ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  Rendered chats/_chat_info.html.erb (2.2ms)
  Rendered chats/show.html.erb within layouts/application (44.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 105ms (Views: 92.7ms | ActiveRecord: 1.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:28:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (45.3ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 80ms (Views: 72.7ms | ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-27 11:28:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (32.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 69ms (Views: 61.0ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:28:38 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (7.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (49.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 84ms (Views: 76.4ms | ActiveRecord: 1.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 11:28:38 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (6.4ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (33.1ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 67ms (Views: 59.7ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:28:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (48.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 86ms (Views: 77.5ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:29:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (8.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (42.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 74ms (Views: 68.3ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 11:29:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (26.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 60ms (Views: 52.8ms | ActiveRecord: 1.8ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:29:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (45.8ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 86ms (Views: 76.8ms | ActiveRecord: 1.1ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 11:29:32 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (80.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (47.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (98.9ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:34:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (6.6ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (43.9ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 98ms (Views: 93.2ms | ActiveRecord: 0.8ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 11:34:34 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (97.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (98.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:34:35 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (42.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 76ms (Views: 70.4ms | ActiveRecord: 0.7ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 11:34:35 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (109.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (44.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (98.6ms)


Started GET "/chats" for ::1 at 2017-10-27 11:41:17 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (15.5ms)
  Rendered chats/index.html.erb within layouts/application (16.9ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 86ms (Views: 65.2ms | ActiveRecord: 1.2ms)


Started GET "/chats" for ::1 at 2017-10-27 11:41:17 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  Rendered chats/index.html.erb within layouts/application (5.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
Completed 200 OK in 51ms (Views: 46.8ms | ActiveRecord: 0.4ms)


Started GET "/chats" for ::1 at 2017-10-27 11:41:22 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  Rendered chats/index.html.erb within layouts/application (4.6ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 36ms (Views: 33.5ms | ActiveRecord: 0.3ms)


Started GET "/chats" for ::1 at 2017-10-27 11:41:23 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  Rendered chats/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 32ms (Views: 29.8ms | ActiveRecord: 0.3ms)


Started GET "/users/2" for ::1 at 2017-10-27 11:41:26 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.1ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (57.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (88.7ms)


Started GET "/chats" for ::1 at 2017-10-27 11:41:37 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  Rendered chats/index.html.erb within layouts/application (6.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 49ms (Views: 46.7ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:41:39 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.6ms)
  Rendered chats/show.html.erb within layouts/application (50.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
Completed 200 OK in 91ms (Views: 75.3ms | ActiveRecord: 1.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:50:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (6.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (44.5ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 90ms (Views: 85.4ms | ActiveRecord: 0.8ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 11:50:08 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (97.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (44.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (94.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:51:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.6ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (43.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 1622ms (Views: 1616.9ms | ActiveRecord: 0.8ms)


Started GET "/assets/application.self-0cd4f2e4753e99b49789a100882507e021d0c24b073a5c898d8ccbd61d7001f7.css?body=1" for ::1 at 2017-10-27 11:52:00 +0800


Started GET "/chats/2" for ::1 at 2017-10-27 11:53:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (5.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (42.8ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 1562ms (Views: 1556.9ms | ActiveRecord: 0.8ms)


Started GET "/assets/application.self-e90479f8696f9fdac67fd1310e0e9709af381e5d9aec2805fc9a12ba4af11599.css?body=1" for ::1 at 2017-10-27 11:53:08 +0800


Started GET "/chats/2" for ::1 at 2017-10-27 11:53:09 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (43.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 79ms (Views: 74.0ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 11:59:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (46.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 133ms (Views: 126.6ms | ActiveRecord: 1.1ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 11:59:40 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (85.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (40.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (91.8ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:01:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (5.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (43.6ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 93ms (Views: 88.6ms | ActiveRecord: 0.8ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:01:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (38.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 67.0ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:01:18 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (38.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 69ms (Views: 63.9ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:03:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (39.5ms)
  Rendered layouts/_login_panel.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 1557ms (Views: 1552.0ms | ActiveRecord: 0.8ms)


Started GET "/assets/application.self-38c49dee8ef1a33d9445558e2b98bf329c09d75d01a7a1581af2bbe5bebf8d11.css?body=1" for ::1 at 2017-10-27 12:03:02 +0800


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 12:03:02 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (100.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (95.6ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:04:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (43.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 1525ms (Views: 1519.7ms | ActiveRecord: 0.7ms)


Started GET "/assets/application.self-5deb69832578e5b02bbe9e8cadb7116d30b3cbd17b098cb7206599462d64d100.css?body=1" for ::1 at 2017-10-27 12:04:02 +0800


Started GET "/chats/2" for ::1 at 2017-10-27 12:04:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (53.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 98ms (Views: 89.1ms | ActiveRecord: 1.1ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 12:04:02 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (96.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (40.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (92.4ms)


Started GET "/chats" for ::1 at 2017-10-27 12:04:30 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.7ms)
  Rendered chats/index.html.erb within layouts/application (6.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 59ms (Views: 54.6ms | ActiveRecord: 0.3ms)


Started GET "/chats" for ::1 at 2017-10-27 12:04:46 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  Rendered chats/index.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 36ms (Views: 32.7ms | ActiveRecord: 0.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:06:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.2ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (13.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (53.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 95ms (Views: 86.9ms | ActiveRecord: 1.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:06:14 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"1123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "1123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 04:06:14.057154"], ["updated_at", "2017-10-27 04:06:14.057154"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 1.6ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:06:14 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (40.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 74ms (Views: 66.2ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F908743c87d0be17e181a5e5078e80db53bb9e17b&partial_name=message_row&resource_name=message&resource_id=21" for ::1 at 2017-10-27 12:06:14 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/908743c87d0be17e181a5e5078e80db53bb9e17b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"21"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 21]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started GET "/sync/refetch.json?auth_token=%2F908743c87d0be17e181a5e5078e80db53bb9e17b&partial_name=message_row&resource_name=message&resource_id=21" for ::1 at 2017-10-27 12:06:14 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/908743c87d0be17e181a5e5078e80db53bb9e17b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"21"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 21]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:07:56 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (41.5ms)
  Rendered layouts/_header.html.erb (10.1ms)
Completed 500 Internal Server Error in 80ms (ActiveRecord: 0.9ms)

ActionView::Template::Error (private method `avatar_url' called for #<User:0x00007fdb4a592158>):
    21:             <%= link_to user_path(current_user), class: "dropbtn" do %>
    22:                 <%= current_user.name %> <span class="glyphicon glyphicon-user"></span>
    23:                 <div class="col-md-8 text-right">
    24:                   Currently signed in as <img src="<%= current_user.avatar_url %>" width="14" /> <%= current_user.name %>
    25:                 </div>
    26:             <% end %>
    27:           </li>
  app/views/layouts/_header.html.erb:24:in `block in _app_views_layouts__header_html_erb___1309177676987836080_70289936686680'
  app/views/layouts/_header.html.erb:21:in `_app_views_layouts__header_html_erb___1309177676987836080_70289936686680'
  app/views/layouts/application.html.erb:16:in `_app_views_layouts_application_html_erb__4374375547686620111_70289911708020'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (51.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (85.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:08:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (40.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 71ms (Views: 66.5ms | ActiveRecord: 0.8ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:10:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (43.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 78ms (Views: 72.9ms | ActiveRecord: 0.9ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:11:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (41.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 75ms (Views: 67.5ms | ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:11:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (27.6ms)
  Rendered layouts/_login_panel.html.erb (6.1ms)
  Rendered layouts/_header.html.erb (7.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 71ms (Views: 63.8ms | ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:14:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (25.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 60ms (Views: 53.2ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:14:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.5ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (30.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 63ms (Views: 57.1ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:54:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.8ms)
  Rendered chats/show.html.erb within layouts/application (34.0ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 84ms (Views: 78.7ms | ActiveRecord: 0.7ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 12:54:10 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (6.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (8.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (7.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (189.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (49.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (117.3ms)


Started GET "/chats" for ::1 at 2017-10-27 12:54:11 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.1ms)
  Rendered chats/index.html.erb within layouts/application (7.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 48ms (Views: 45.0ms | ActiveRecord: 0.4ms)


Started GET "/" for ::1 at 2017-10-27 12:54:14 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.6ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 35ms (Views: 33.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 12:54:21 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 30ms (Views: 29.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 12:54:21 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 32ms (Views: 31.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 12:54:22 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (1.0ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 33ms (Views: 32.4ms | ActiveRecord: 0.2ms)


Started GET "/chats" for ::1 at 2017-10-27 12:54:23 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  Rendered chats/index.html.erb within layouts/application (5.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 39ms (Views: 34.7ms | ActiveRecord: 0.4ms)


Started GET "/users/1" for ::1 at 2017-10-27 12:54:24 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (52.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (43.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (91.0ms)


Started POST "/chats" for ::1 at 2017-10-27 12:54:33 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vhKyLU7wArFsbaSs6zCtK2O2tR5AYEzB6OlbKOKirnq5kbKG7RKk+jLWl5T2UAGcFFRq6pKMF0iXdoHSVeqtdA==", "users"=>"2", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:54:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (26.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 56ms (Views: 52.1ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-27 12:54:37 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 04:54:37.839691"], ["updated_at", "2017-10-27 04:54:37.839691"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 6ms (ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:54:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (32.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 73ms (Views: 65.9ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F65af013a649c30d95ef9ee1de1dabaf6ca6a760f&partial_name=message_row&resource_name=message&resource_id=22" for ::1 at 2017-10-27 12:54:37 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/65af013a649c30d95ef9ee1de1dabaf6ca6a760f", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"22"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 22]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/chats" for ::1 at 2017-10-27 12:54:46 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JM8HhApl8hE8RmUbN40f+XZ3DKXbwUK0oD2+XZQ9IN/WAGkXxg/j/nddfSgCWWF24ibhK59x1ScZiyIntSwrGg==", "users"=>"1", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:54:46 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (44.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 74ms (Views: 69.9ms | ActiveRecord: 0.8ms)


Started GET "/assets/application.self-5deb69832578e5b02bbe9e8cadb7116d30b3cbd17b098cb7206599462d64d100.css?body=1" for ::1 at 2017-10-27 12:54:46 +0800


Started POST "/messages" for ::1 at 2017-10-27 12:54:49 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:54:49.125874"], ["updated_at", "2017-10-27 04:54:49.125874"]]
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 3.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:54:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (47.9ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 82ms (Views: 76.9ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2Fddb2644fbf4eb66a265d7acc5d50e9f9f5f1130f&partial_name=message_row&resource_name=message&resource_id=23" for ::1 at 2017-10-27 12:54:49 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ddb2644fbf4eb66a265d7acc5d50e9f9f5f1130f", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"23"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 23]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:54:50 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:54:50.947243"], ["updated_at", "2017-10-27 04:54:50.947243"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:54:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (46.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 79ms (Views: 72.5ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F58f8f9da47a15fbe61c755c14413924e5ddaac9d&partial_name=message_row&resource_name=message&resource_id=24" for ::1 at 2017-10-27 12:54:51 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/58f8f9da47a15fbe61c755c14413924e5ddaac9d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"24"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 24]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/chats/1" for ::1 at 2017-10-27 12:54:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (2.5ms)
  Rendered chats/show.html.erb within layouts/application (37.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 76ms (Views: 68.2ms | ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:54:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (46.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 80ms (Views: 72.8ms | ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (47.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 80ms (Views: 75.3ms | ActiveRecord: 0.9ms)


Started POST "/chats" for ::1 at 2017-10-27 12:55:07 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OIWVWLg+AOO+xXP+owpuCz/9+iAotbT2crr+85u+5oHKSvvLdFQRDPXea82W3hCEq6wXrmwFI2XLDGKJuq/tRA==", "users"=>"1", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (55.3ms)
  Rendered layouts/_login_panel.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 91ms (Views: 85.3ms | ActiveRecord: 1.0ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:11 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:11.334242"], ["updated_at", "2017-10-27 04:55:11.334242"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 2.3ms)


Started GET "/sync/refetch.json?auth_token=%2Ff16b2fc3393a1e42ffd9ef4af800ab32fe0a8e91&partial_name=message_row&resource_name=message&resource_id=25" for ::1 at 2017-10-27 12:55:11 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f16b2fc3393a1e42ffd9ef4af800ab32fe0a8e91", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"25"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 25]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (49.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 81ms (Views: 76.6ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2Ff16b2fc3393a1e42ffd9ef4af800ab32fe0a8e91&partial_name=message_row&resource_name=message&resource_id=25" for ::1 at 2017-10-27 12:55:11 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f16b2fc3393a1e42ffd9ef4af800ab32fe0a8e91", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"25"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 25]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:16 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:16.114665"], ["updated_at", "2017-10-27 04:55:16.114665"]]
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (51.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 86ms (Views: 81.3ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F380215551001ba96f8c4a35d03a1899b0b752ea5&partial_name=message_row&resource_name=message&resource_id=26" for ::1 at 2017-10-27 12:55:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/380215551001ba96f8c4a35d03a1899b0b752ea5", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"26"}
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 26]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started GET "/sync/refetch.json?auth_token=%2F380215551001ba96f8c4a35d03a1899b0b752ea5&partial_name=message_row&resource_name=message&resource_id=26" for ::1 at 2017-10-27 12:55:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/380215551001ba96f8c4a35d03a1899b0b752ea5", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"26"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 26]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.8ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:16 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:16.470842"], ["updated_at", "2017-10-27 04:55:16.470842"]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 3.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.7ms)
  Rendered chats/show.html.erb within layouts/application (65.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 101ms (Views: 95.7ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2Fecb1cef249bb17201a252e4ba7e5df483c86bcf2&partial_name=message_row&resource_name=message&resource_id=27" for ::1 at 2017-10-27 12:55:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ecb1cef249bb17201a252e4ba7e5df483c86bcf2", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"27"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 27]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2Fecb1cef249bb17201a252e4ba7e5df483c86bcf2&partial_name=message_row&resource_name=message&resource_id=27" for ::1 at 2017-10-27 12:55:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ecb1cef249bb17201a252e4ba7e5df483c86bcf2", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"27"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 27]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:16 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:16.814258"], ["updated_at", "2017-10-27 04:55:16.814258"]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 0.9ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (61.0ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 96ms (Views: 91.8ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F3a7b0ff24f5e40fd7b675468c919f7d4742c853e&partial_name=message_row&resource_name=message&resource_id=28" for ::1 at 2017-10-27 12:55:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/3a7b0ff24f5e40fd7b675468c919f7d4742c853e", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"28"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 28]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F3a7b0ff24f5e40fd7b675468c919f7d4742c853e&partial_name=message_row&resource_name=message&resource_id=28" for ::1 at 2017-10-27 12:55:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/3a7b0ff24f5e40fd7b675468c919f7d4742c853e", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"28"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 28]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:17 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:17.185830"], ["updated_at", "2017-10-27 04:55:17.185830"]]
  [1m[35m (2.5ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.9ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (64.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 97ms (Views: 91.8ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2Fefac28fba32c3ef9812ba71bd0087d6c32694db2&partial_name=message_row&resource_name=message&resource_id=29" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/efac28fba32c3ef9812ba71bd0087d6c32694db2", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"29"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 29]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fefac28fba32c3ef9812ba71bd0087d6c32694db2&partial_name=message_row&resource_name=message&resource_id=29" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/efac28fba32c3ef9812ba71bd0087d6c32694db2", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"29"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 29]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:17 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:17.495944"], ["updated_at", "2017-10-27 04:55:17.495944"]]
  [1m[35m (2.4ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 3.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (64.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 97ms (Views: 92.7ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2Fc131dbbfc49a3735cb74866738190ef55b8f2d5a&partial_name=message_row&resource_name=message&resource_id=30" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c131dbbfc49a3735cb74866738190ef55b8f2d5a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"30"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 30]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fc131dbbfc49a3735cb74866738190ef55b8f2d5a&partial_name=message_row&resource_name=message&resource_id=30" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c131dbbfc49a3735cb74866738190ef55b8f2d5a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"30"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 30]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:17 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:17.641311"], ["updated_at", "2017-10-27 04:55:17.641311"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.6ms)
  Rendered chats/show.html.erb within layouts/application (77.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 119ms (Views: 108.2ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2F27f17c7fc9df321c34f8ac7cdfb289f764ee266b&partial_name=message_row&resource_name=message&resource_id=31" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/27f17c7fc9df321c34f8ac7cdfb289f764ee266b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"31"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 31]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F27f17c7fc9df321c34f8ac7cdfb289f764ee266b&partial_name=message_row&resource_name=message&resource_id=31" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/27f17c7fc9df321c34f8ac7cdfb289f764ee266b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"31"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 31]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:17 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:17.829787"], ["updated_at", "2017-10-27 04:55:17.829787"]]
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 2.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.9ms)
  Rendered chats/show.html.erb within layouts/application (77.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 113ms (Views: 103.6ms | ActiveRecord: 1.3ms)


Started GET "/sync/refetch.json?auth_token=%2Fbad7092355846cfcf1bdcad7d70307aafc0e37dc&partial_name=message_row&resource_name=message&resource_id=32" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/bad7092355846cfcf1bdcad7d70307aafc0e37dc", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"32"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 32]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.8ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/sync/refetch.json?auth_token=%2Fbad7092355846cfcf1bdcad7d70307aafc0e37dc&partial_name=message_row&resource_name=message&resource_id=32" for ::1 at 2017-10-27 12:55:17 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/bad7092355846cfcf1bdcad7d70307aafc0e37dc", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"32"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 32]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:19 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:19.268945"], ["updated_at", "2017-10-27 04:55:19.268945"]]
  [1m[35m (2.5ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 3.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (67.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 107ms (Views: 100.4ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F9917897822312226c5a04e41a0679f413d6527e0&partial_name=message_row&resource_name=message&resource_id=33" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/9917897822312226c5a04e41a0679f413d6527e0", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"33"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 33]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F9917897822312226c5a04e41a0679f413d6527e0&partial_name=message_row&resource_name=message&resource_id=33" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/9917897822312226c5a04e41a0679f413d6527e0", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"33"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 33]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:19 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:19.618359"], ["updated_at", "2017-10-27 04:55:19.618359"]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (75.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 116ms (Views: 111.1ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2Fd6e2e6e0e2f7ee9c508accbe0cee266928f613ab&partial_name=message_row&resource_name=message&resource_id=34" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/d6e2e6e0e2f7ee9c508accbe0cee266928f613ab", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"34"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 34]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2Fd6e2e6e0e2f7ee9c508accbe0cee266928f613ab&partial_name=message_row&resource_name=message&resource_id=34" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/d6e2e6e0e2f7ee9c508accbe0cee266928f613ab", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"34"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 34]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:19 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:19.774284"], ["updated_at", "2017-10-27 04:55:19.774284"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.3ms)


Started GET "/sync/refetch.json?auth_token=%2F5696d79250aaf858a297c93fb8db03e5abef455d&partial_name=message_row&resource_name=message&resource_id=35" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/5696d79250aaf858a297c93fb8db03e5abef455d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"35"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 35]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.9ms)
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (85.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 120ms (Views: 111.9ms | ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2F5696d79250aaf858a297c93fb8db03e5abef455d&partial_name=message_row&resource_name=message&resource_id=35" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/5696d79250aaf858a297c93fb8db03e5abef455d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"35"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 35]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:19 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:19.965804"], ["updated_at", "2017-10-27 04:55:19.965804"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 2.5ms)


Started GET "/sync/refetch.json?auth_token=%2F6d9d1589116e8757e832e49bc681f6d5078dd3be&partial_name=message_row&resource_name=message&resource_id=36" for ::1 at 2017-10-27 12:55:19 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6d9d1589116e8757e832e49bc681f6d5078dd3be", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"36"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 36]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:20 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (78.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 112ms (Views: 103.8ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F6d9d1589116e8757e832e49bc681f6d5078dd3be&partial_name=message_row&resource_name=message&resource_id=36" for ::1 at 2017-10-27 12:55:20 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6d9d1589116e8757e832e49bc681f6d5078dd3be", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"36"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 36]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.7ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:22.294172"], ["updated_at", "2017-10-27 04:55:22.294172"]]
  [1m[35m (2.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 3.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (79.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 113ms (Views: 108.2ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2F0ffd7c761e8b6709b0896dcb11987649bf8b0890&partial_name=message_row&resource_name=message&resource_id=37" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0ffd7c761e8b6709b0896dcb11987649bf8b0890", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"37"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 37]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F0ffd7c761e8b6709b0896dcb11987649bf8b0890&partial_name=message_row&resource_name=message&resource_id=37" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0ffd7c761e8b6709b0896dcb11987649bf8b0890", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"37"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 37]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:22.456742"], ["updated_at", "2017-10-27 04:55:22.456742"]]
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 12ms (ActiveRecord: 3.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.6ms)
  Rendered chats/_navside.html.erb (6.7ms)
  [1m[35mMessage Load (0.3ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (88.3ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 130ms (Views: 121.0ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2F60ed4bf63448e4f9106302d57460ea7a2e95a170&partial_name=message_row&resource_name=message&resource_id=38" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/60ed4bf63448e4f9106302d57460ea7a2e95a170", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"38"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 38]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F60ed4bf63448e4f9106302d57460ea7a2e95a170&partial_name=message_row&resource_name=message&resource_id=38" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/60ed4bf63448e4f9106302d57460ea7a2e95a170", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"38"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 38]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:22.631847"], ["updated_at", "2017-10-27 04:55:22.631847"]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.6ms)


Started GET "/sync/refetch.json?auth_token=%2F2a3f1b6c0bdbb9c4f7ee4e185024ce714acf9a60&partial_name=message_row&resource_name=message&resource_id=39" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2a3f1b6c0bdbb9c4f7ee4e185024ce714acf9a60", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"39"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 39]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.1ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (86.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 122ms (Views: 114.6ms | ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2F2a3f1b6c0bdbb9c4f7ee4e185024ce714acf9a60&partial_name=message_row&resource_name=message&resource_id=39" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2a3f1b6c0bdbb9c4f7ee4e185024ce714acf9a60", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"39"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 39]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:22.819050"], ["updated_at", "2017-10-27 04:55:22.819050"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 2.3ms)


Started GET "/sync/refetch.json?auth_token=%2F366b11abf998d735f96adfd13b4afa95712c7725&partial_name=message_row&resource_name=message&resource_id=40" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/366b11abf998d735f96adfd13b4afa95712c7725", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"40"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 40]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (94.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 129ms (Views: 121.0ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2F366b11abf998d735f96adfd13b4afa95712c7725&partial_name=message_row&resource_name=message&resource_id=40" for ::1 at 2017-10-27 12:55:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/366b11abf998d735f96adfd13b4afa95712c7725", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"40"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 40]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:22.994635"], ["updated_at", "2017-10-27 04:55:22.994635"]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 2.6ms)


Started GET "/sync/refetch.json?auth_token=%2F27809f070dbc6ac7976437aec6d64c5655f1b5ea&partial_name=message_row&resource_name=message&resource_id=41" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/27809f070dbc6ac7976437aec6d64c5655f1b5ea", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"41"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 41]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (4.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (8.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (114.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 154ms (Views: 143.8ms | ActiveRecord: 1.3ms)


Started GET "/sync/refetch.json?auth_token=%2F27809f070dbc6ac7976437aec6d64c5655f1b5ea&partial_name=message_row&resource_name=message&resource_id=41" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/27809f070dbc6ac7976437aec6d64c5655f1b5ea", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"41"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 41]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:23.223790"], ["updated_at", "2017-10-27 04:55:23.223790"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.5ms)


Started GET "/sync/refetch.json?auth_token=%2F6d305f81d45529cf555a5b440a5f9d4ad838c5e6&partial_name=message_row&resource_name=message&resource_id=42" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6d305f81d45529cf555a5b440a5f9d4ad838c5e6", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"42"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 42]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (5.6ms)
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (102.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 136ms (Views: 130.6ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F6d305f81d45529cf555a5b440a5f9d4ad838c5e6&partial_name=message_row&resource_name=message&resource_id=42" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6d305f81d45529cf555a5b440a5f9d4ad838c5e6", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"42"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 42]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.5ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:23.429980"], ["updated_at", "2017-10-27 04:55:23.429980"]]
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 16ms (ActiveRecord: 7.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:23.452732"], ["updated_at", "2017-10-27 04:55:23.452732"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2Fc300e8e78f043e139bd8a5767eb7a66c551394d2&partial_name=message_row&resource_name=message&resource_id=43" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c300e8e78f043e139bd8a5767eb7a66c551394d2", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"43"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 43]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (6.5ms)
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/sync/refetch.json?auth_token=%2F86401a050e0ea582dfa5e908254ec070fc8fdd1a&partial_name=message_row&resource_name=message&resource_id=44" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/86401a050e0ea582dfa5e908254ec070fc8fdd1a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"44"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 44]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fc300e8e78f043e139bd8a5767eb7a66c551394d2&partial_name=message_row&resource_name=message&resource_id=43" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c300e8e78f043e139bd8a5767eb7a66c551394d2", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"43"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 43]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (105.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 135ms (Views: 130.6ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F86401a050e0ea582dfa5e908254ec070fc8fdd1a&partial_name=message_row&resource_name=message&resource_id=44" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/86401a050e0ea582dfa5e908254ec070fc8fdd1a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"44"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 44]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:23.679735"], ["updated_at", "2017-10-27 04:55:23.679735"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (105.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 144ms (Views: 137.5ms | ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fee56290c6dd22c6e207652262376ba7f6c361d82&partial_name=message_row&resource_name=message&resource_id=45" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ee56290c6dd22c6e207652262376ba7f6c361d82", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"45"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 45]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:23.854186"], ["updated_at", "2017-10-27 04:55:23.854186"]]
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.6ms)


Started GET "/sync/refetch.json?auth_token=%2Fee56290c6dd22c6e207652262376ba7f6c361d82&partial_name=message_row&resource_name=message&resource_id=45" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ee56290c6dd22c6e207652262376ba7f6c361d82", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"45"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 45]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F4b1f0816f045e1e75c88fcf62d1eb4a1972e6e5a&partial_name=message_row&resource_name=message&resource_id=46" for ::1 at 2017-10-27 12:55:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/4b1f0816f045e1e75c88fcf62d1eb4a1972e6e5a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"46"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 46]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (108.0ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 148ms (Views: 139.5ms | ActiveRecord: 1.3ms)


Started GET "/sync/refetch.json?auth_token=%2F4b1f0816f045e1e75c88fcf62d1eb4a1972e6e5a&partial_name=message_row&resource_name=message&resource_id=46" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/4b1f0816f045e1e75c88fcf62d1eb4a1972e6e5a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"46"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 46]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.082726"], ["updated_at", "2017-10-27 04:55:24.082726"]]
  [1m[35m (2.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 3.2ms)


Started GET "/sync/refetch.json?auth_token=%2F17454078473f91fe1679a8a3693c649f02d2ea05&partial_name=message_row&resource_name=message&resource_id=47" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/17454078473f91fe1679a8a3693c649f02d2ea05", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"47"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 47]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (114.8ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 152ms (Views: 146.0ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F17454078473f91fe1679a8a3693c649f02d2ea05&partial_name=message_row&resource_name=message&resource_id=47" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/17454078473f91fe1679a8a3693c649f02d2ea05", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"47"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 47]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.308888"], ["updated_at", "2017-10-27 04:55:24.308888"]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.3ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.320194"], ["updated_at", "2017-10-27 04:55:24.320194"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 1.3ms)


Started GET "/sync/refetch.json?auth_token=%2F8838dfe83fa4437e71d05e05071922452b6fb509&partial_name=message_row&resource_name=message&resource_id=48" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/8838dfe83fa4437e71d05e05071922452b6fb509", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"48"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 48]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.1ms)
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 0.3ms)


Started GET "/sync/refetch.json?auth_token=%2F1e9f4f0bac524a2f0a87e17c7aa3f121a46b32c0&partial_name=message_row&resource_name=message&resource_id=49" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/1e9f4f0bac524a2f0a87e17c7aa3f121a46b32c0", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"49"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 49]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.7ms)
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (1.4ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (124.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 158ms (Views: 150.0ms | ActiveRecord: 2.4ms)


Started GET "/sync/refetch.json?auth_token=%2F8838dfe83fa4437e71d05e05071922452b6fb509&partial_name=message_row&resource_name=message&resource_id=48" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/8838dfe83fa4437e71d05e05071922452b6fb509", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"48"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 48]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F1e9f4f0bac524a2f0a87e17c7aa3f121a46b32c0&partial_name=message_row&resource_name=message&resource_id=49" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/1e9f4f0bac524a2f0a87e17c7aa3f121a46b32c0", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"49"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 49]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.563527"], ["updated_at", "2017-10-27 04:55:24.563527"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.2ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.579537"], ["updated_at", "2017-10-27 04:55:24.579537"]]
  [1m[35m (0.5ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.5ms)
  Rendered chats/show.html.erb within layouts/application (125.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 160ms (Views: 154.9ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (122.0ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 158ms (Views: 153.0ms | ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fb8e9d3520e6214daeec7e9af3dd0117017086e70&partial_name=message_row&resource_name=message&resource_id=50" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/b8e9d3520e6214daeec7e9af3dd0117017086e70", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"50"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 50]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fb8e9d3520e6214daeec7e9af3dd0117017086e70&partial_name=message_row&resource_name=message&resource_id=50" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/b8e9d3520e6214daeec7e9af3dd0117017086e70", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"50"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 50]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.941893"], ["updated_at", "2017-10-27 04:55:24.941893"]]
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.7ms)


Started GET "/sync/refetch.json?auth_token=%2F4a44939219f63ac162a7857042f265a67fa12e2d&partial_name=message_row&resource_name=message&resource_id=51" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/4a44939219f63ac162a7857042f265a67fa12e2d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"51"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 51]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F4a44939219f63ac162a7857042f265a67fa12e2d&partial_name=message_row&resource_name=message&resource_id=51" for ::1 at 2017-10-27 12:55:24 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/4a44939219f63ac162a7857042f265a67fa12e2d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"51"}
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 51]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started POST "/messages" for ::1 at 2017-10-27 12:55:24 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 04:55:24.980405"], ["updated_at", "2017-10-27 04:55:24.980405"]]
  [1m[35m (0.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 1.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (120.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 154ms (Views: 146.0ms | ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fe9a6b1b503f21308f736b9cf2de27ddafa4b7d95&partial_name=message_row&resource_name=message&resource_id=52" for ::1 at 2017-10-27 12:55:25 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/e9a6b1b503f21308f736b9cf2de27ddafa4b7d95", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"52"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 52]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fe9a6b1b503f21308f736b9cf2de27ddafa4b7d95&partial_name=message_row&resource_name=message&resource_id=52" for ::1 at 2017-10-27 12:55:25 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/e9a6b1b503f21308f736b9cf2de27ddafa4b7d95", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"52"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 52]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 12:55:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (118.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 152ms (Views: 147.8ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F6803df4d8ecf1d1f8f0a227c2b089cfc769a1d3f&partial_name=message_row&resource_name=message&resource_id=53" for ::1 at 2017-10-27 12:55:25 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6803df4d8ecf1d1f8f0a227c2b089cfc769a1d3f", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"53"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 53]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.9ms)
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/sync/refetch.json?auth_token=%2F6803df4d8ecf1d1f8f0a227c2b089cfc769a1d3f&partial_name=message_row&resource_name=message&resource_id=53" for ::1 at 2017-10-27 12:55:25 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6803df4d8ecf1d1f8f0a227c2b089cfc769a1d3f", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"53"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 53]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.7ms)
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:10:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (7.0ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (121.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 1645ms (Views: 1639.4ms | ActiveRecord: 1.3ms)


Started GET "/assets/application.self-ae47c26333115a2a0342f1c0791cad53e30efdcecaa4f1dcbf9088e3b8b622d7.css?body=1" for ::1 at 2017-10-27 14:10:03 +0800


Started GET "/chats/2" for ::1 at 2017-10-27 14:16:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (0.3ms)
  Rendered chats/show.html.erb within layouts/application (113.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 162ms (Views: 155.5ms | ActiveRecord: 1.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:16:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (43.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 79ms (Views: 72.3ms | ActiveRecord: 1.2ms)


Started GET "/chats" for ::1 at 2017-10-27 14:16:13 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  Rendered chats/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 39ms (Views: 35.4ms | ActiveRecord: 0.3ms)


Started GET "/users/1" for ::1 at 2017-10-27 14:16:14 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.4ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (51.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (52.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (106.1ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:16:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (35.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 64.0ms | ActiveRecord: 0.9ms)


Started GET "/chats" for ::1 at 2017-10-27 14:16:19 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.5ms)
  Rendered chats/index.html.erb within layouts/application (6.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 44ms (Views: 40.4ms | ActiveRecord: 0.5ms)


Started GET "/" for ::1 at 2017-10-27 14:16:20 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 41ms (Views: 40.3ms | ActiveRecord: 0.1ms)


Started DELETE "/sessions/logout" for ::1 at 2017-10-27 14:17:28 +0800
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"weaE3zwkVVsNcgEqFZdzsA8fPydLtTyeW/5KZhRv3gvGZYR0n8bzEFPJMhII998HeP3g05lZZxckYZCcoyfdBQ=="}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2017-10-27 14:17:28 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 50ms (Views: 49.9ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-27 14:17:34 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"CvSZgicjGYOd8E2sthcfuBNa0/dcuwzmtFSj0hxa+XwNd5kphMG/yMNLfpSrd7MPZLgMA45XV2/Ly3koqxL6cg==", "session"=>{"email"=>"123123@123.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "button"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "123123@123.com"]]
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/" for ::1 at 2017-10-27 14:17:34 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 32ms (Views: 31.5ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-27 14:17:53 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"D5dUkz7jAnuYiGiD8zuPxEeDvOODqkFAV9CNj6iXq/EIFFQ4nQGkMMYzW7vuWyNzMGFjF1FGGskoT1d1H9+o/w==", "session"=>{"email"=>"user123@test.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1  [["email", "user123@test.com"]]
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 14:17:53 +0800
Processing by HomesController#home as HTML
  Rendered homes/home.html.erb within layouts/application (0.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 32ms (Views: 32.1ms | ActiveRecord: 0.0ms)


Started POST "/sessions/login" for ::1 at 2017-10-27 14:18:11 +0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ssfqSrpEmWBWc76faBT+TuaLhAerX1oNUGmspUm5ex+1ROrhGaY/KwjIjad1dFL5kWlb83mzAYQv9nZf/vF4EQ==", "session"=>{"email"=>"user1@test.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT 1[0m  [["email", "user1@test.com"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (2.3ms)[0m  [1mUPDATE "users" SET "remember_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["remember_digest", "$2a$10$v/9TQdHITFODLuHGR9eK8O9TxrggIbm3HQxjBqLR.sD5QwtX0omna"], ["updated_at", "2017-10-27 06:18:12.077712"], ["id", 1]]
  [1m[35m (1.1ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 120ms (ActiveRecord: 3.6ms)


Started GET "/" for ::1 at 2017-10-27 14:18:12 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 33ms (Views: 32.2ms | ActiveRecord: 0.1ms)


Started GET "/users/1" for ::1 at 2017-10-27 14:18:19 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (46.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (46.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (95.9ms)


Started GET "/chats" for ::1 at 2017-10-27 14:18:24 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.0ms)
  Rendered chats/index.html.erb within layouts/application (7.3ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 46ms (Views: 42.2ms | ActiveRecord: 0.8ms)


Started GET "/" for ::1 at 2017-10-27 14:18:26 +0800
Processing by HomesController#home as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.7ms)
  Rendered layouts/_login_panel.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 38ms (Views: 37.6ms | ActiveRecord: 0.1ms)


Started GET "/" for ::1 at 2017-10-27 14:31:47 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (7.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 1927ms (Views: 1922.1ms | ActiveRecord: 0.9ms)


Started GET "/assets/application.self-611413ab40af02cd3a9a9b66ac36358ac242bca2aacd8d8dda07d3e1637979d3.css?body=1" for ::1 at 2017-10-27 14:31:49 +0800


Started GET "/chats" for ::1 at 2017-10-27 14:32:12 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (5.6ms)
  Rendered chats/index.html.erb within layouts/application (7.1ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 49ms (Views: 44.9ms | ActiveRecord: 0.7ms)


Started GET "/users/1" for ::1 at 2017-10-27 14:32:13 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.0ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (47.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (41.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (92.4ms)


Started GET "/users/1" for ::1 at 2017-10-27 14:32:17 +0800
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms)

ActionView::MissingTemplate (Missing template users/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :jbuilder, :haml]}. Searched in:
  * "/Users/qianyandai/Desktop/Ruby/RailsChat/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/rails_admin-0.8.1/app/views"
  * "/Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/kaminari-0.17.0/app/views"
):
  actionview (4.2.10) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.10) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.10) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.10) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:46:in `render_template'
  actionview (4.2.10) lib/action_view/renderer/renderer.rb:27:in `render'
  actionview (4.2.10) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.10) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.10) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.10) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/qianyandai/.rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/benchmark.rb:308:in `realtime'
  activesupport (4.2.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:43:in `render'
  remotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.10) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.10) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.10) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.10) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.10) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.10) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.10) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.10) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.10) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.10) lib/action_dispatch/routing/route_set.rb:817:in `call'
  rack-pjax (0.8.0) lib/rack/pjax.rb:12:in `call'
  rack (1.6.8) lib/rack/etag.rb:24:in `call'
  rack (1.6.8) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.8) lib/rack/head.rb:13:in `call'
  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.8) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.8) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.10) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.10) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.10) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.10) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.10) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (55.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (88.0ms)


Started GET "/chats" for ::1 at 2017-10-27 14:32:24 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  Rendered chats/index.html.erb within layouts/application (7.6ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 58ms (Views: 53.2ms | ActiveRecord: 1.8ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 14:33:08 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (71.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (58.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (112.8ms)


Started POST "/chats" for ::1 at 2017-10-27 14:35:52 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gM02R9GDSk8h3RzWgH/yxtqkGTKj5Ba29SRdwCQaqz2HTjbscmHsBH9mL+6dH15xrUbGxnEITT+Ku4c6k1KoMw==", "users"=>"2", "button"=>""}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:35:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (7.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.5ms)
  Rendered chats/show.html.erb within layouts/application (35.6ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 1781ms (Views: 1776.1ms | ActiveRecord: 0.8ms)


Started POST "/chats" for ::1 at 2017-10-27 14:35:54 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gM02R9GDSk8h3RzWgH/yxtqkGTKj5Ba29SRdwCQaqz2HTjbscmHsBH9mL+6dH15xrUbGxnEITT+Ku4c6k1KoMw==", "users"=>"2", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:35:54 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (5.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (33.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 75ms (Views: 70.0ms | ActiveRecord: 0.7ms)


Started GET "/assets/application.self-309dd4b2d422fbf9c72835fd1a727f615fc5d7ac7cfe0cad059bc073f9efd1d8.css?body=1" for ::1 at 2017-10-27 14:35:54 +0800


Started POST "/messages" for ::1 at 2017-10-27 14:35:58 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 06:35:58.887521"], ["updated_at", "2017-10-27 06:35:58.887521"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:35:58 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (35.0ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 81ms (Views: 73.5ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F49c81bd40bcef8332f6c4dac4f48163a83b8081d&partial_name=message_row&resource_name=message&resource_id=54" for ::1 at 2017-10-27 14:35:58 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/49c81bd40bcef8332f6c4dac4f48163a83b8081d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"54"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 54]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.9ms)
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 14:35:59 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 06:35:59.669532"], ["updated_at", "2017-10-27 06:35:59.669532"]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.6ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:35:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.5ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (33.9ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 71ms (Views: 65.0ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F6af660bbfec1bd77081feb43ff00594f38fcf231&partial_name=message_row&resource_name=message&resource_id=55" for ::1 at 2017-10-27 14:35:59 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6af660bbfec1bd77081feb43ff00594f38fcf231", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"55"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 55]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.0ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:37:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.6ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.7ms)
  Rendered chats/show.html.erb within layouts/application (39.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_content.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 93ms (Views: 87.8ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:37:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.7ms)
  Rendered chats/show.html.erb within layouts/application (38.5ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 81ms (Views: 76.9ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:38:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.6ms)
  Rendered chats/show.html.erb within layouts/application (38.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 87ms (Views: 81.5ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:38:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (36.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 70ms (Views: 63.6ms | ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:38:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (34.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 71ms (Views: 65.4ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:39:31 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (38.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 77ms (Views: 72.6ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:39:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (35.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 66.5ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:39:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (32.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 66ms (Views: 59.9ms | ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:39:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (32.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 64ms (Views: 58.9ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:40:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (33.9ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 68.1ms | ActiveRecord: 0.6ms)


Started GET "/chats/1" for ::1 at 2017-10-27 14:40:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (31.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 61ms (Views: 56.9ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:40:36 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (113.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 146ms (Views: 139.2ms | ActiveRecord: 1.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:40:39 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (113.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 147ms (Views: 139.9ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:41:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.7ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (123.0ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 173ms (Views: 168.0ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:41:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (118.7ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 155ms (Views: 147.9ms | ActiveRecord: 1.6ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:41:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (112.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 144ms (Views: 137.8ms | ActiveRecord: 1.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:43:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (120.2ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 152ms (Views: 145.6ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:43:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (111.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 142ms (Views: 137.0ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:06 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.9ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (120.3ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 174ms (Views: 168.2ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (115.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 152ms (Views: 146.8ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (112.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 145ms (Views: 139.5ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:31 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.7ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (120.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 170ms (Views: 164.0ms | ActiveRecord: 1.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (122.4ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 158ms (Views: 150.3ms | ActiveRecord: 1.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:42 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (115.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 146ms (Views: 140.9ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (120.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 152ms (Views: 146.7ms | ActiveRecord: 1.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:45:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (113.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 147ms (Views: 141.7ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:52:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.4ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (120.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 171ms (Views: 165.6ms | ActiveRecord: 1.2ms)


Started POST "/messages" for ::1 at 2017-10-27 14:52:53 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 06:52:53.215741"], ["updated_at", "2017-10-27 06:52:53.215741"]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 0.8ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:52:53 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (117.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 154ms (Views: 146.8ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2Ff694ff427b2afb7d0e984df29063b2012a9e1004&partial_name=message_row&resource_name=message&resource_id=56" for ::1 at 2017-10-27 14:52:53 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f694ff427b2afb7d0e984df29063b2012a9e1004", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"56"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 56]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2Ff694ff427b2afb7d0e984df29063b2012a9e1004&partial_name=message_row&resource_name=message&resource_id=56" for ::1 at 2017-10-27 14:52:53 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f694ff427b2afb7d0e984df29063b2012a9e1004", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"56"}
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 56]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started POST "/messages" for ::1 at 2017-10-27 14:52:55 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 06:52:55.881171"], ["updated_at", "2017-10-27 06:52:55.881171"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:52:55 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (126.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 160ms (Views: 152.9ms | ActiveRecord: 1.4ms)


Started GET "/sync/refetch.json?auth_token=%2Ff69caba9af017b2373a8f477fe4247cc59ceebca&partial_name=message_row&resource_name=message&resource_id=57" for ::1 at 2017-10-27 14:52:56 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f69caba9af017b2373a8f477fe4247cc59ceebca", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"57"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 57]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Ff69caba9af017b2373a8f477fe4247cc59ceebca&partial_name=message_row&resource_name=message&resource_id=57" for ::1 at 2017-10-27 14:52:56 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f69caba9af017b2373a8f477fe4247cc59ceebca", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"57"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 57]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 14:52:57 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 06:52:57.787500"], ["updated_at", "2017-10-27 06:52:57.787500"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:52:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.5ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (126.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 160ms (Views: 152.5ms | ActiveRecord: 1.4ms)


Started GET "/sync/refetch.json?auth_token=%2F8a1955bf9471ff88880a8383148766709e54d8a4&partial_name=message_row&resource_name=message&resource_id=58" for ::1 at 2017-10-27 14:52:57 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/8a1955bf9471ff88880a8383148766709e54d8a4", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"58"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 58]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F8a1955bf9471ff88880a8383148766709e54d8a4&partial_name=message_row&resource_name=message&resource_id=58" for ::1 at 2017-10-27 14:52:57 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/8a1955bf9471ff88880a8383148766709e54d8a4", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"58"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 58]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 14:52:59 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123321"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123321"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 06:52:59.691456"], ["updated_at", "2017-10-27 06:52:59.691456"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:52:59 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (126.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 160ms (Views: 153.2ms | ActiveRecord: 1.4ms)


Started GET "/sync/refetch.json?auth_token=%2F5e26fe02593fab87f0836aeefe72530985765233&partial_name=message_row&resource_name=message&resource_id=59" for ::1 at 2017-10-27 14:52:59 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/5e26fe02593fab87f0836aeefe72530985765233", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"59"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 59]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F5e26fe02593fab87f0836aeefe72530985765233&partial_name=message_row&resource_name=message&resource_id=59" for ::1 at 2017-10-27 14:52:59 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/5e26fe02593fab87f0836aeefe72530985765233", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"59"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 59]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 14:53:01 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"3212312"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "3212312"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 06:53:01.901245"], ["updated_at", "2017-10-27 06:53:01.901245"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.6ms)


Started GET "/chats/2" for ::1 at 2017-10-27 14:53:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (134.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 182ms (Views: 173.3ms | ActiveRecord: 1.7ms)


Started GET "/sync/refetch.json?auth_token=%2Fadecbc3d400bd16ae306ac20bd715cb1eaef0cde&partial_name=message_row&resource_name=message&resource_id=60" for ::1 at 2017-10-27 14:53:02 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/adecbc3d400bd16ae306ac20bd715cb1eaef0cde", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"60"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 60]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fadecbc3d400bd16ae306ac20bd715cb1eaef0cde&partial_name=message_row&resource_name=message&resource_id=60" for ::1 at 2017-10-27 14:53:02 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/adecbc3d400bd16ae306ac20bd715cb1eaef0cde", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"60"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 60]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:02:47 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.4ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (5.0ms)
  Rendered chats/show.html.erb within layouts/application (6.6ms)
Completed 500 Internal Server Error in 60ms (ActiveRecord: 4.6ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (54.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (44.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (96.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:03:15 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (4.7ms)
  Rendered chats/show.html.erb within layouts/application (6.7ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.4ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (58.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (93.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:03:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.7ms)
  Rendered chats/show.html.erb within layouts/application (3.9ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.4ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (42.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (86.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:03:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.8ms)
  Rendered chats/show.html.erb within layouts/application (3.9ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.4ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (43.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (90.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:03:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.9ms)
  Rendered chats/show.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (48.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (83.1ms)


Started GET "/chats" for ::1 at 2017-10-27 15:04:03 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (3.2ms)
  Rendered chats/index.html.erb within layouts/application (4.3ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (51.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (89.1ms)


Started GET "/" for ::1 at 2017-10-27 15:04:05 +0800
Processing by HomesController#home as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered homes/home.html.erb within layouts/application (0.5ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 52ms (Views: 51.8ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-27 15:04:07 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.8ms)
  Rendered chats/index.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (45.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (80.1ms)


Started GET "/chats" for ::1 at 2017-10-27 15:06:59 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (3.9ms)
  Rendered chats/index.html.erb within layouts/application (5.4ms)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.9ms)

ActionView::Template::Error (undefined method `downcase_email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (53.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (41.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (98.7ms)


Started GET "/chats" for ::1 at 2017-10-27 15:07:02 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (3.3ms)
  Rendered chats/index.html.erb within layouts/application (4.4ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined method `downcase_email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (51.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (80.8ms)


Started GET "/chats" for ::1 at 2017-10-27 15:07:18 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (26.9ms)
  Rendered chats/index.html.erb within layouts/application (27.8ms)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 0.8ms)

ActionView::Template::Error (undefined local variable or method `user_id' for #<#<Class:0x00007fdb4a65cde0>:0x00007fdb4a647e68>
Did you mean?  user):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (47.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (85.8ms)


Started GET "/chats" for ::1 at 2017-10-27 15:07:29 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.9ms)
  Rendered chats/index.html.erb within layouts/application (3.9ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.8ms)

ActionView::Template::Error (undefined method `id' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (50.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (82.5ms)


Started GET "/chats" for ::1 at 2017-10-27 15:07:40 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.2ms)
  Rendered chats/index.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 0.8ms)

ActionView::Template::Error (no implicit conversion of nil into String):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `digest'
  app/helpers/users_helper.rb:3:in `hexdigest'
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (51.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (41.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (87.6ms)


Started GET "/chats" for ::1 at 2017-10-27 15:07:42 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.3ms)
  Rendered chats/index.html.erb within layouts/application (3.4ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (no implicit conversion of nil into String):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `digest'
  app/helpers/users_helper.rb:3:in `hexdigest'
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (49.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (80.8ms)


Started GET "/chats" for ::1 at 2017-10-27 15:07:43 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (2.2ms)
  Rendered chats/index.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (no implicit conversion of nil into String):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `digest'
  app/helpers/users_helper.rb:3:in `hexdigest'
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (51.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (36.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (84.9ms)


Started GET "/chats" for ::1 at 2017-10-27 15:12:16 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (7.2ms)
  Rendered chats/index.html.erb within layouts/application (9.5ms)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 1.1ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (26.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (76.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (50.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (102.7ms)


Started GET "/chats" for ::1 at 2017-10-27 15:14:02 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (9.0ms)
  Rendered chats/index.html.erb within layouts/application (10.9ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.9ms)

ActionView::Template::Error (undefined method `email' for #<Class:0x00007fdb4e37bc08>):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (55.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (48.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (104.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users"  ORDER BY "users"."id" ASC LIMIT 1[0m


Started GET "/chats" for ::1 at 2017-10-27 15:18:00 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (3.4ms)
  Rendered chats/index.html.erb within layouts/application (4.7ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 0.8ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (86.0ms)


Started GET "/chats" for ::1 at 2017-10-27 15:18:02 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (3.0ms)
  Rendered chats/index.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined method `email' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (83.3ms)


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:11 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:13 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:14 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:16 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:19 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:23 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:25 +0800


Started POST "/__web_console/repl_sessions/a8290f5b01ab162cb478c925e110a689/trace" for ::1 at 2017-10-27 15:18:26 +0800


Started GET "/chats" for ::1 at 2017-10-27 15:18:43 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (4.1ms)
  Rendered chats/index.html.erb within layouts/application (5.7ms)
Completed 500 Internal Server Error in 32ms (ActiveRecord: 0.7ms)

ActionView::Template::Error (undefined method `createtime' for nil:NilClass):
    18: 
    19:                 <button class="btn btn-default btn-block" data-toggle="collapse" data-target="#user-<%= user.id %>" id="tab-contact-default">
    20:                   <!-- <%= image_tag "user-icon.png", class: "img-sm" %> -->
    21:                   <%= gravatar_for @user %>
    22:                   <div class="text-muted">
    23:                     <%= user.name %>
    24:                   </div>
  app/helpers/users_helper.rb:3:in `gravatar_for'
  app/views/chats/_navside.html.erb:21:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/_navside.html.erb:16:in `each'
  app/views/chats/_navside.html.erb:16:in `_app_views_chats__navside_html_erb___171408089416622537_70289909244380'
  app/views/chats/index.html.erb:3:in `_app_views_chats_index_html_erb__3568249281478932780_70289887189300'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (53.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (87.3ms)


Started GET "/chats" for ::1 at 2017-10-27 15:23:13 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (18.9ms)
  Rendered chats/index.html.erb within layouts/application (20.2ms)
  Rendered layouts/_login_panel.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 107ms (Views: 85.6ms | ActiveRecord: 1.2ms)


Started GET "/chats" for ::1 at 2017-10-27 15:23:19 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  Rendered chats/index.html.erb within layouts/application (5.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 38ms (Views: 34.1ms | ActiveRecord: 0.4ms)


Started POST "/chats" for ::1 at 2017-10-27 15:23:23 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"n/Zrv9TYesXUmkf70NcE9j1ZcR1TLrA3TfhDSIFhDKOYdWsUdzrcjoohdMPNt6hBSruu6YHC674yZ5myNikPrQ==", "users"=>"2", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 7ms (ActiveRecord: 0.4ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:23:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.7ms)
  Rendered chats/show.html.erb within layouts/application (37.2ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 84ms (Views: 70.1ms | ActiveRecord: 1.0ms)


Started POST "/messages" for ::1 at 2017-10-27 15:23:26 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"234234"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "234234"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:23:26.407367"], ["updated_at", "2017-10-27 07:23:26.407367"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 10ms (ActiveRecord: 1.6ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:23:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (37.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 70ms (Views: 64.1ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F824d1011da75e27290ea99bd8ff1d59f433c6cf1&partial_name=message_row&resource_name=message&resource_id=61" for ::1 at 2017-10-27 15:23:26 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/824d1011da75e27290ea99bd8ff1d59f433c6cf1", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"61"}
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 61]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started POST "/messages" for ::1 at 2017-10-27 15:23:26 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:23:26.929951"], ["updated_at", "2017-10-27 07:23:26.929951"]]
  [1m[35m (2.1ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.5ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:23:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (37.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 71ms (Views: 64.4ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2Fa71b1d3562e646281431337ca8539f0360b77abd&partial_name=message_row&resource_name=message&resource_id=62" for ::1 at 2017-10-27 15:23:27 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/a71b1d3562e646281431337ca8539f0360b77abd", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"62"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 62]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:24:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (38.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 66.0ms | ActiveRecord: 0.8ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:25:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (38.4ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 67.3ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:28:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (38.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 71ms (Views: 65.6ms | ActiveRecord: 0.7ms)


Started POST "/messages" for ::1 at 2017-10-27 15:28:16 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:28:16.023213"], ["updated_at", "2017-10-27 07:28:16.023213"]]
  [1m[35m (0.5ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 5ms (ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:28:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (40.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 81ms (Views: 74.4ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2Fe84bc3dac54f8e7043486eebc783e386f0285662&partial_name=message_row&resource_name=message&resource_id=63" for ::1 at 2017-10-27 15:28:16 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/e84bc3dac54f8e7043486eebc783e386f0285662", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"63"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 63]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 15:28:23 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (5.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (103.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (51.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (106.5ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:30:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.5ms)
  Rendered chats/show.html.erb within layouts/application (44.9ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 90ms (Views: 84.0ms | ActiveRecord: 0.9ms)


Started GET "/assets/toastr.js.map" for ::1 at 2017-10-27 15:30:10 +0800

ActionController::RoutingError (No route matches [GET] "/assets/toastr.js.map"):
  actionpack (4.2.10) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'
  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.10) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.10) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.10) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.8) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.8) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.10) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.8) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.10) lib/action_dispatch/middleware/static.rb:120:in `call'
  rack (1.6.8) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.10) lib/rails/engine.rb:518:in `call'
  railties (4.2.10) lib/rails/application.rb:165:in `call'
  rack (1.6.8) lib/rack/content_length.rb:15:in `call'
  thin (1.7.2) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.7.2) lib/thin/connection.rb:84:in `catch'
  thin (1.7.2) lib/thin/connection.rb:84:in `pre_process'
  thin (1.7.2) lib/thin/connection.rb:53:in `process'
  thin (1.7.2) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run_machine'
  eventmachine (1.2.5) lib/eventmachine.rb:194:in `run'
  thin (1.7.2) lib/thin/backends/base.rb:73:in `start'
  thin (1.7.2) lib/thin/server.rb:162:in `start'
  rack (1.6.8) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.8) lib/rack/server.rb:287:in `start'
  railties (4.2.10) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.10) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.10) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (127.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (46.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (98.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:30:17 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.3ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (2.0ms)
  Rendered chats/show.html.erb within layouts/application (150.9ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 192ms (Views: 186.1ms | ActiveRecord: 1.7ms)


Started GET "/assets/application.self-309dd4b2d422fbf9c72835fd1a727f615fc5d7ac7cfe0cad059bc073f9efd1d8.css?body=1" for ::1 at 2017-10-27 15:30:18 +0800


Started POST "/messages" for ::1 at 2017-10-27 15:30:21 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 07:30:21.681221"], ["updated_at", "2017-10-27 07:30:21.681221"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:30:21 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (8.5ms)
  [1m[35mMessage Load (0.3ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (150.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 195ms (Views: 181.6ms | ActiveRecord: 2.3ms)


Started GET "/sync/refetch.json?auth_token=%2Ff4d1c78cb240f0029e3ec6384f671d6766b6938a&partial_name=message_row&resource_name=message&resource_id=64" for ::1 at 2017-10-27 15:30:21 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/f4d1c78cb240f0029e3ec6384f671d6766b6938a", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"64"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 64]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (4.1ms)
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:30:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (2.0ms)
  Rendered chats/show.html.erb within layouts/application (143.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 189ms (Views: 182.7ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:30:39 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (135.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 175ms (Views: 167.6ms | ActiveRecord: 1.7ms)


Started POST "/messages" for ::1 at 2017-10-27 15:30:49 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:30:49.971825"], ["updated_at", "2017-10-27 07:30:49.971825"]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 0.9ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:30:49 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.1ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (135.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 169ms (Views: 161.9ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2Ffd65006bf217cbc0e51224f4a25ae288239541ec&partial_name=message_row&resource_name=message&resource_id=65" for ::1 at 2017-10-27 15:30:50 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/fd65006bf217cbc0e51224f4a25ae288239541ec", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"65"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 65]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Ffd65006bf217cbc0e51224f4a25ae288239541ec&partial_name=message_row&resource_name=message&resource_id=65" for ::1 at 2017-10-27 15:30:50 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/fd65006bf217cbc0e51224f4a25ae288239541ec", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"65"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 65]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:30:53 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.8ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (41.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 75ms (Views: 68.0ms | ActiveRecord: 1.0ms)


Started POST "/messages" for ::1 at 2017-10-27 15:30:57 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:30:57.213184"], ["updated_at", "2017-10-27 07:30:57.213184"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 1.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:30:57 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (42.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 77ms (Views: 70.0ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2F829167a790d989a90c747fb4cb2b9bebdcc6c95c&partial_name=message_row&resource_name=message&resource_id=66" for ::1 at 2017-10-27 15:30:57 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/829167a790d989a90c747fb4cb2b9bebdcc6c95c", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"66"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 66]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:01 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[35mMessage Load (0.5ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (138.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 176ms (Views: 167.3ms | ActiveRecord: 2.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:07 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (140.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 175ms (Views: 167.5ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:08 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (7.2ms)
  [1m[35mMessage Load (0.3ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (155.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 196ms (Views: 187.7ms | ActiveRecord: 2.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:10 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (8.1ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (165.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 204ms (Views: 195.4ms | ActiveRecord: 1.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:31:11 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (7.1ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (59.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 100ms (Views: 91.7ms | ActiveRecord: 2.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.7ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (145.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 183ms (Views: 173.7ms | ActiveRecord: 1.7ms)


Started GET "/chats" for ::1 at 2017-10-27 15:31:17 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.6ms)
  Rendered chats/index.html.erb within layouts/application (5.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 48ms (Views: 44.3ms | ActiveRecord: 0.5ms)


Started GET "/chats" for ::1 at 2017-10-27 15:31:23 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.5ms)
  Rendered chats/index.html.erb within layouts/application (5.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 38ms (Views: 34.0ms | ActiveRecord: 0.4ms)


Started POST "/chats" for ::1 at 2017-10-27 15:31:27 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ulQ/tPxDG1RQ2TUYCqgJm/OW9lK3iVP3+jWivn6pWtG91z8fX6G9Hw5iBiAXyKUshHQppmVlCH6FqnhEyeFZ3w==", "users"=>"2", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:31:27 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (41.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 68.1ms | ActiveRecord: 0.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (131.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 164ms (Views: 157.5ms | ActiveRecord: 1.4ms)


Started POST "/messages" for ::1 at 2017-10-27 15:31:39 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:31:39.380117"], ["updated_at", "2017-10-27 07:31:39.380117"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:31:39 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (141.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 180ms (Views: 171.8ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2F68510e63f409b591833062949d2566f4893eb5ca&partial_name=message_row&resource_name=message&resource_id=67" for ::1 at 2017-10-27 15:31:39 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/68510e63f409b591833062949d2566f4893eb5ca", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"67"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 67]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F68510e63f409b591833062949d2566f4893eb5ca&partial_name=message_row&resource_name=message&resource_id=67" for ::1 at 2017-10-27 15:31:39 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/68510e63f409b591833062949d2566f4893eb5ca", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"67"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 67]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/chats" for ::1 at 2017-10-27 15:31:46 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"f6RJ4ek/g/7faA7oPysSfTscy7PDm0uLzCprQL220PJ4J0lKSt0ltYHTPdAiS77KTP4URxF3EAKztbG6Cv7T/A==", "users"=>"3", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:31:46 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (42.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 76ms (Views: 70.6ms | ActiveRecord: 0.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:31:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (42.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 77ms (Views: 69.6ms | ActiveRecord: 1.4ms)


Started POST "/chats" for ::1 at 2017-10-27 15:31:52 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"v3JPtA+Y9T6C0IFsyP/rVG1w13epdQheUEQVGg4acJG48U8frHpTddxrslTVn0fjGpIIg3uZU9cv28/guVJznw==", "users"=>"2", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:31:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (44.3ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 85ms (Views: 81.1ms | ActiveRecord: 0.7ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:02 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", "123123"], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:02.026899"], ["updated_at", "2017-10-27 07:32:02.026899"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 1.4ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:02 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (46.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 81ms (Views: 74.8ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F21bfb6e6ac15fdc2e7310274298f2222e1d6703b&partial_name=message_row&resource_name=message&resource_id=68" for ::1 at 2017-10-27 15:32:02 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/21bfb6e6ac15fdc2e7310274298f2222e1d6703b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"68"}
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 68]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:03 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:03.198385"], ["updated_at", "2017-10-27 07:32:03.198385"]]
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (48.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 84ms (Views: 77.5ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2Fb00fd6f5dc015c61a431029c89920e379094dbac&partial_name=message_row&resource_name=message&resource_id=69" for ::1 at 2017-10-27 15:32:03 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/b00fd6f5dc015c61a431029c89920e379094dbac", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"69"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 69]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:03 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:03.867186"], ["updated_at", "2017-10-27 07:32:03.867186"]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 7ms (ActiveRecord: 2.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (51.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 86ms (Views: 80.2ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2Fff797484269a7db99e5d0c6c336e57873faf665d&partial_name=message_row&resource_name=message&resource_id=70" for ::1 at 2017-10-27 15:32:03 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ff797484269a7db99e5d0c6c336e57873faf665d", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"70"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 70]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.5ms)
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:04 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:04.358602"], ["updated_at", "2017-10-27 07:32:04.358602"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 8ms (ActiveRecord: 2.5ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.4ms)
  Rendered chats/show.html.erb within layouts/application (53.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 89ms (Views: 82.6ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2Feeeeaca1698e0b5120e6d223262d60b525d09860&partial_name=message_row&resource_name=message&resource_id=71" for ::1 at 2017-10-27 15:32:04 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/eeeeaca1698e0b5120e6d223262d60b525d09860", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"71"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 71]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:04 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:04.660482"], ["updated_at", "2017-10-27 07:32:04.660482"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 8ms (ActiveRecord: 2.5ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (58.7ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 93ms (Views: 86.8ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F447177531cd282b3ce6e79674c62446c8bee54ec&partial_name=message_row&resource_name=message&resource_id=72" for ::1 at 2017-10-27 15:32:04 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/447177531cd282b3ce6e79674c62446c8bee54ec", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"72"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 72]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.0ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:05 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:05.129108"], ["updated_at", "2017-10-27 07:32:05.129108"]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 8ms (ActiveRecord: 2.5ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (60.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 97ms (Views: 90.2ms | ActiveRecord: 1.0ms)


Started GET "/sync/refetch.json?auth_token=%2F0d0f8451872a11208a6c97290c2607e8941b90ea&partial_name=message_row&resource_name=message&resource_id=73" for ::1 at 2017-10-27 15:32:05 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0d0f8451872a11208a6c97290c2607e8941b90ea", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"73"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 73]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:05 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"1", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 1], ["created_at", "2017-10-27 07:32:05.429894"], ["updated_at", "2017-10-27 07:32:05.429894"]]
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/1
Completed 200 OK in 8ms (ActiveRecord: 2.4ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:32:05 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (7.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (67.1ms)
  Rendered layouts/_login_panel.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 99ms (Views: 93.1ms | ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2F8cb7d29c42fec3ae99aaf23ccbe082ebc05767ff&partial_name=message_row&resource_name=message&resource_id=74" for ::1 at 2017-10-27 15:32:05 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/8cb7d29c42fec3ae99aaf23ccbe082ebc05767ff", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"74"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 74]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/chats" for ::1 at 2017-10-27 15:32:12 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lsA1nkj9pwoPyJM7Fl1wdBC2akh6U4taEQ7Ve1LwVgZkD1sNhJe25UTTiwgjiQ77hOeHxj7jHMmouEkBc+Fdww==", "users"=>"1", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:12 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (140.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 172ms (Views: 166.0ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (135.3ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 172ms (Views: 166.5ms | ActiveRecord: 1.2ms)


Started POST "/chats" for ::1 at 2017-10-27 15:32:19 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bm/bP6iKDZ4yu09Qdpb1kzRK+F3wtgvDoFvuXYu8y/icoLWsZOAccXmgV2NDQoscoBsV07QGnFAZ7XInqq3APQ==", "users"=>"1", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
Redirected to http://localhost:3000/chats/2
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:19 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (138.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 169ms (Views: 164.4ms | ActiveRecord: 1.3ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.3ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 07:32:22.292094"], ["updated_at", "2017-10-27 07:32:22.292094"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 3.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[35mMessage Load (0.3ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (137.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 179ms (Views: 173.0ms | ActiveRecord: 1.4ms)


Started GET "/sync/refetch.json?auth_token=%2F59bc7685e28eac832289cf69299597f7441e6d66&partial_name=message_row&resource_name=message&resource_id=75" for ::1 at 2017-10-27 15:32:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/59bc7685e28eac832289cf69299597f7441e6d66", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"75"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 75]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 07:32:23.362094"], ["updated_at", "2017-10-27 07:32:23.362094"]]
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 2.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (136.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 168ms (Views: 162.7ms | ActiveRecord: 1.3ms)


Started GET "/sync/refetch.json?auth_token=%2F6d47e973e18f2b2fff67a4ef1a553c562b035a00&partial_name=message_row&resource_name=message&resource_id=76" for ::1 at 2017-10-27 15:32:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/6d47e973e18f2b2fff67a4ef1a553c562b035a00", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"76"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 76]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.4ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 2], ["chat_id", 2], ["created_at", "2017-10-27 07:32:23.775340"], ["updated_at", "2017-10-27 07:32:23.775340"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 9ms (ActiveRecord: 2.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.6ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (139.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 173ms (Views: 168.4ms | ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fad273882368f8271a8ec6bf2225f3bfa979a4949&partial_name=message_row&resource_name=message&resource_id=77" for ::1 at 2017-10-27 15:32:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ad273882368f8271a8ec6bf2225f3bfa979a4949", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"77"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 77]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.6ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (159.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 199ms (Views: 189.4ms | ActiveRecord: 1.7ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (138.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 173ms (Views: 168.3ms | ActiveRecord: 1.3ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:28 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:28.441849"], ["updated_at", "2017-10-27 07:32:28.441849"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 8ms (ActiveRecord: 2.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.9ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (147.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 180ms (Views: 174.9ms | ActiveRecord: 1.3ms)


Started GET "/sync/refetch.json?auth_token=%2F9f594b30513e2c5381402f3794d8939e7a8bff1b&partial_name=message_row&resource_name=message&resource_id=78" for ::1 at 2017-10-27 15:32:28 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/9f594b30513e2c5381402f3794d8939e7a8bff1b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"78"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 78]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F9f594b30513e2c5381402f3794d8939e7a8bff1b&partial_name=message_row&resource_name=message&resource_id=78" for ::1 at 2017-10-27 15:32:28 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/9f594b30513e2c5381402f3794d8939e7a8bff1b", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"78"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 78]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:28 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:28.674008"], ["updated_at", "2017-10-27 07:32:28.674008"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 1.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fef0078703e1efdadff869d514863a95eb54af180&partial_name=message_row&resource_name=message&resource_id=79" for ::1 at 2017-10-27 15:32:28 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ef0078703e1efdadff869d514863a95eb54af180", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"79"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 79]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (166.1ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 204ms (Views: 193.7ms | ActiveRecord: 2.0ms)


Started GET "/sync/refetch.json?auth_token=%2Fef0078703e1efdadff869d514863a95eb54af180&partial_name=message_row&resource_name=message&resource_id=79" for ::1 at 2017-10-27 15:32:28 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/ef0078703e1efdadff869d514863a95eb54af180", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"79"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 79]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:28 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:28.948909"], ["updated_at", "2017-10-27 07:32:28.948909"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (166.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 203ms (Views: 193.9ms | ActiveRecord: 1.6ms)


Started GET "/sync/refetch.json?auth_token=%2Faf84e1848b58bdf834d5ef73d88f73cb73fae9b7&partial_name=message_row&resource_name=message&resource_id=80" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/af84e1848b58bdf834d5ef73d88f73cb73fae9b7", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"80"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 80]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Faf84e1848b58bdf834d5ef73d88f73cb73fae9b7&partial_name=message_row&resource_name=message&resource_id=80" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/af84e1848b58bdf834d5ef73d88f73cb73fae9b7", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"80"}
  [1m[36mMessage Load (0.5ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 80]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:29 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:29.201131"], ["updated_at", "2017-10-27 07:32:29.201131"]]
  [1m[35m (0.7ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 6ms (ActiveRecord: 1.1ms)


Started GET "/sync/refetch.json?auth_token=%2Feeb2b8a5a7da32f48b85498768109e37bd171ede&partial_name=message_row&resource_name=message&resource_id=81" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/eeb2b8a5a7da32f48b85498768109e37bd171ede", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"81"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 81]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:29 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (170.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 217ms (Views: 211.4ms | ActiveRecord: 1.5ms)


Started GET "/sync/refetch.json?auth_token=%2Feeb2b8a5a7da32f48b85498768109e37bd171ede&partial_name=message_row&resource_name=message&resource_id=81" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/eeb2b8a5a7da32f48b85498768109e37bd171ede", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"81"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 81]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:29 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:29.497101"], ["updated_at", "2017-10-27 07:32:29.497101"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 1.8ms)


Started GET "/sync/refetch.json?auth_token=%2F2c166a1a9e08a75eeeaca83a2c1fe4ac53093125&partial_name=message_row&resource_name=message&resource_id=82" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2c166a1a9e08a75eeeaca83a2c1fe4ac53093125", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"82"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 82]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (5.7ms)
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:29 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (5.6ms)
  [1m[35mMessage Load (0.3ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (172.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 213ms (Views: 205.8ms | ActiveRecord: 1.7ms)


Started GET "/sync/refetch.json?auth_token=%2F2c166a1a9e08a75eeeaca83a2c1fe4ac53093125&partial_name=message_row&resource_name=message&resource_id=82" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2c166a1a9e08a75eeeaca83a2c1fe4ac53093125", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"82"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 82]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:29 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:29.790504"], ["updated_at", "2017-10-27 07:32:29.790504"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 1.4ms)


Started GET "/sync/refetch.json?auth_token=%2Fbdb22e1ac4b1cea69042ece88584798940c5c195&partial_name=message_row&resource_name=message&resource_id=83" for ::1 at 2017-10-27 15:32:29 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/bdb22e1ac4b1cea69042ece88584798940c5c195", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"83"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 83]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:29 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (176.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 215ms (Views: 206.1ms | ActiveRecord: 1.7ms)


Started GET "/sync/refetch.json?auth_token=%2Fbdb22e1ac4b1cea69042ece88584798940c5c195&partial_name=message_row&resource_name=message&resource_id=83" for ::1 at 2017-10-27 15:32:30 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/bdb22e1ac4b1cea69042ece88584798940c5c195", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"83"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 83]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:30 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:30.086985"], ["updated_at", "2017-10-27 07:32:30.086985"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 7ms (ActiveRecord: 1.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:32:30 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:32:30.097055"], ["updated_at", "2017-10-27 07:32:30.097055"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2F660cc7220a034f939d58f2c6403d55b80729f9d1&partial_name=message_row&resource_name=message&resource_id=84" for ::1 at 2017-10-27 15:32:30 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/660cc7220a034f939d58f2c6403d55b80729f9d1", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"84"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 84]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (5.6ms)
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started GET "/sync/refetch.json?auth_token=%2F46b8663e41ddcd5f9b01624fa30b53161b95efe5&partial_name=message_row&resource_name=message&resource_id=85" for ::1 at 2017-10-27 15:32:30 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/46b8663e41ddcd5f9b01624fa30b53161b95efe5", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"85"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 85]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (5.8ms)
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 0.5ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.7ms)
  [1m[36mMessage Load (0.3ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (169.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 201ms (Views: 195.4ms | ActiveRecord: 1.4ms)


Started GET "/sync/refetch.json?auth_token=%2F660cc7220a034f939d58f2c6403d55b80729f9d1&partial_name=message_row&resource_name=message&resource_id=84" for ::1 at 2017-10-27 15:32:30 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/660cc7220a034f939d58f2c6403d55b80729f9d1", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"84"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 84]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.9ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F46b8663e41ddcd5f9b01624fa30b53161b95efe5&partial_name=message_row&resource_name=message&resource_id=85" for ::1 at 2017-10-27 15:32:30 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/46b8663e41ddcd5f9b01624fa30b53161b95efe5", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"85"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 85]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:32:30 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (9.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (192.3ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 225ms (Views: 219.6ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:33:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (159.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 192ms (Views: 186.5ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:33:38 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.8ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (157.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 189ms (Views: 184.0ms | ActiveRecord: 1.4ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:34:13 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/show.html.erb within layouts/application (8.7ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.6ms)

SyntaxError (/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/sync/messages/refetch/_message_row.html.erb:3: syntax error, unexpected ',', expecting ':'
d==message.user.id ? 'right' , 'left' );@output_buffer.safe_
                              ^):
  app/views/sync/messages/refetch/_message_row.html.erb:3: syntax error, unexpected ',', expecting ':'
  app/views/chats/show.html.erb:49:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (45.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (97.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:34:27 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/show.html.erb within layouts/application (8.6ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.6ms)

SyntaxError (/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/sync/messages/refetch/_message_row.html.erb:3: syntax error, unexpected tSTRING_BEG, expecting '('
message.user.id ? 'right' :: 'left' );@output_buffer.safe_ap
                              ^):
  app/views/sync/messages/refetch/_message_row.html.erb:3: syntax error, unexpected tSTRING_BEG, expecting '('
  app/views/chats/show.html.erb:49:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (49.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (40.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (91.2ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:34:32 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (158.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 195ms (Views: 188.7ms | ActiveRecord: 1.6ms)


Started POST "/messages" for ::1 at 2017-10-27 15:34:46 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 1], ["chat_id", 2], ["created_at", "2017-10-27 07:34:46.027168"], ["updated_at", "2017-10-27 07:34:46.027168"]]
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/2
Completed 200 OK in 5ms (ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:34:46 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 2], ["id", 1]]
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.7ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (163.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 209ms (Views: 199.3ms | ActiveRecord: 3.2ms)


Started GET "/sync/refetch.json?auth_token=%2F12cbeacbd1a8f1089b12551d234465181d50a959&partial_name=message_row&resource_name=message&resource_id=86" for ::1 at 2017-10-27 15:34:46 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/12cbeacbd1a8f1089b12551d234465181d50a959", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"86"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 86]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.8ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/sync/refetch.json?auth_token=%2F12cbeacbd1a8f1089b12551d234465181d50a959&partial_name=message_row&resource_name=message&resource_id=86" for ::1 at 2017-10-27 15:34:46 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/12cbeacbd1a8f1089b12551d234465181d50a959", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"86"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 86]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.2ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:36:28 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (61.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 96ms (Views: 88.3ms | ActiveRecord: 1.1ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:38:31 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (61.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 95ms (Views: 89.7ms | ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:38:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.7ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (59.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 95ms (Views: 88.0ms | ActiveRecord: 1.0ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:38:50 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.0ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (71.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 111ms (Views: 101.5ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:38:51 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (164.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 200ms (Views: 191.3ms | ActiveRecord: 1.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:38:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.3ms)
  Rendered chats/show.html.erb within layouts/application (71.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 116ms (Views: 109.0ms | ActiveRecord: 1.3ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:38:52 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.3ms)
  [1m[36mMessage Load (0.4ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (186.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 225ms (Views: 216.1ms | ActiveRecord: 2.1ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:38:53 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (69.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 106ms (Views: 98.5ms | ActiveRecord: 1.1ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:38:53 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (199.2ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 239ms (Views: 230.9ms | ActiveRecord: 1.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:38:54 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (73.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 116ms (Views: 104.9ms | ActiveRecord: 1.4ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:39:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (61.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 101ms (Views: 96.2ms | ActiveRecord: 0.9ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:39:25 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (58.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 94ms (Views: 87.2ms | ActiveRecord: 1.0ms)


Started GET "/chats/2" for ::1 at 2017-10-27 15:39:26 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 2], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.3ms)
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (160.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 197ms (Views: 188.5ms | ActiveRecord: 1.7ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:39:27 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.2ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (1.1ms)
  Rendered chats/show.html.erb within layouts/application (77.6ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 117ms (Views: 109.5ms | ActiveRecord: 1.3ms)


Started POST "/chats" for ::1 at 2017-10-27 15:42:33 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eyck4cFLUARQ9iCRq4wtgXqRDslo6ST5XzZjth5fUBp8pCRKYqn2Tw5NE6m27IE2DXPRPboFf3AgqblMqRdTFA==", "users"=>"2", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:42:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 1], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (6.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.5ms)
  Rendered chats/show.html.erb within layouts/application (67.4ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 115ms (Views: 110.4ms | ActiveRecord: 0.9ms)


Started POST "/chats" for ::1 at 2017-10-27 15:42:37 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fHdsmJXU8uZ2JdEG/9oIUKAh48r5n2ionQNiLZk4J3F79GwzNjZUrSie4j7iuqTn18M8PitzMyHinLjXLnAkfw==", "users"=>"3", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
Redirected to http://localhost:3000/chats/1
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/chats/1" for ::1 at 2017-10-27 15:42:37 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 1], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (60.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 95ms (Views: 90.2ms | ActiveRecord: 0.9ms)


Started DELETE "/friendships/2" for ::1 at 2017-10-27 15:42:39 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"authenticity_token"=>"niBTKNWBLP7I914Dv22HgdIe3pA/twidVQU+6vomgTOZo1ODdmOKtZZMbTuiDSs2pfwBZO1bUxQqmuQQTW6CPQ==", "id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mFriendship Load (0.3ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ? AND "friendships"."friend_id" = ? LIMIT 1[0m  [["user_id", 1], ["friend_id", 2]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 3]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 4]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 5]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 6]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 8]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 22]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 54]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 55]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 61]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 62]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 63]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 66]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 68]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 69]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 70]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 71]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 72]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 73]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 74]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "chats_users" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 1]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "chats" WHERE "chats"."id" = ?  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMessage Load (0.2ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 7]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 9]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 10]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 11]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 12]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 13]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 14]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 15]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 16]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 17]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 18]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 19]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 20]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 21]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 23]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 24]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 25]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 26]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 27]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 28]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 29]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 30]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 31]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 32]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 33]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 34]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 35]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 36]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 37]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 38]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 39]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 40]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 41]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 42]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 43]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 44]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 45]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 46]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 47]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 48]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 49]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 50]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 51]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 52]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 53]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 56]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 57]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 58]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 59]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 60]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 64]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 65]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 67]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 75]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 76]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 77]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 78]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 79]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 80]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 81]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 82]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 83]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 84]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "messages" WHERE "messages"."id" = ?  [["id", 85]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "messages" WHERE "messages"."id" = ?[0m  [["id", 86]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "chats_users" WHERE "chats_users"."chat_id" = ?  [["chat_id", 2]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "chats" WHERE "chats"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.9ms)[0m  commit transaction
Redirected to http://localhost:3000/chats
Completed 302 Found in 50ms (ActiveRecord: 7.5ms)


Started GET "/chats" for ::1 at 2017-10-27 15:42:39 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  Rendered chats/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 43ms (Views: 40.6ms | ActiveRecord: 0.3ms)


Started DELETE "/friendships/3" for ::1 at 2017-10-27 15:42:42 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"authenticity_token"=>"XTtH5dZj9/PeSBh32lYDZbJxUrBeZ7OtQmdYd2dVTJRauEdOdYFRuIDzK0/HNq/SxZONRIyL6CQ9+IKN0B1Pmg==", "id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mFriendship Load (0.1ms)[0m  SELECT  "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ? AND "friendships"."friend_id" = ? LIMIT 1  [["user_id", 1], ["friend_id", 3]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "friendships" WHERE "friendships"."id" = ?  [["id", 2]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
Redirected to http://localhost:3000/chats
Completed 302 Found in 8ms (ActiveRecord: 2.9ms)


Started GET "/chats" for ::1 at 2017-10-27 15:42:42 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (3.0ms)
  Rendered chats/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 38ms (Views: 35.3ms | ActiveRecord: 0.3ms)


Started GET "/chats" for ::1 at 2017-10-27 15:42:45 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (2.0ms)
  Rendered chats/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (3.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 38ms (Views: 34.8ms | ActiveRecord: 0.3ms)


Started GET "/chats" for ::1 at 2017-10-27 15:42:47 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (2.1ms)
  Rendered chats/index.html.erb within layouts/application (3.1ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 36ms (Views: 31.8ms | ActiveRecord: 0.4ms)


Started POST "/messages" for ::1 at 2017-10-27 15:42:55 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"2", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 2]]
Redirected to http://localhost:3000/chats
Completed 200 OK in 2ms (ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-27 15:42:55 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (1.7ms)
  Rendered chats/index.html.erb within layouts/application (2.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 0.2ms)


Started GET "/users/index_json?query=user1" for ::1 at 2017-10-27 15:43:04 +0800
Processing by UsersController#index_json as JSON
  Parameters: {"query"=>"user1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE ("users"."id" != 2) AND ("users"."id" NOT IN (SELECT "users"."id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE ("users"."id" != 2) AND "friendships"."user_id" = ?)) AND (users.name LIKE '%user1%')[0m  [["user_id", 2]]
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.7ms)


Started POST "/friendships?friend_id=1" for ::1 at 2017-10-27 15:43:07 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"authenticity_token"=>"OdatxH5lkHY2LlZJYkVPKP6CyT5NS94dsLgYmBkaFVzLGcNXsg+BmX01TnpXkTGnatMksAn7SY4JDoTiOAsemQ==", "friend_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendships" ("friend_id", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["friend_id", 1], ["user_id", 2], ["created_at", "2017-10-27 07:43:07.401839"], ["updated_at", "2017-10-27 07:43:07.401839"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)


Started GET "/chats" for ::1 at 2017-10-27 15:43:07 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  Rendered chats/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 36ms (Views: 33.7ms | ActiveRecord: 0.2ms)


Started POST "/chats" for ::1 at 2017-10-27 15:43:09 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"peo0NyEzTyEZB7K5Oac8JzEqI84ewe7V66wT9Q2L6xpXJVqk7VlezlIcqooMc0KopXvOQFpxeUZSGo+PLJrg3w==", "users"=>"1", "button"=>""}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user1@test.com') AND "users"."id" != 1) LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('user2@test.com') AND "users"."id" != 2) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "chats" ("admin_id", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["admin_id", 2], ["name", "user1-user2"], ["created_at", "2017-10-27 07:43:09.512126"], ["updated_at", "2017-10-27 07:43:09.512126"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "chats_users" ("user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["chat_id", 3], ["created_at", "2017-10-27 07:43:09.513559"], ["updated_at", "2017-10-27 07:43:09.513559"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "chats_users" ("user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["user_id", 2], ["chat_id", 3], ["created_at", "2017-10-27 07:43:09.514591"], ["updated_at", "2017-10-27 07:43:09.514591"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/3
Completed 302 Found in 15ms (ActiveRecord: 3.5ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:09 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  Rendered chats/_chat_info.html.erb (1.5ms)
  Rendered chats/show.html.erb within layouts/application (8.6ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 41ms (Views: 36.7ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-27 15:43:12 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>"123123"}, "chat_room"=>"3", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "123123"], ["user_id", 2], ["chat_id", 3], ["created_at", "2017-10-27 07:43:12.687623"], ["updated_at", "2017-10-27 07:43:12.687623"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/3
Completed 200 OK in 6ms (ActiveRecord: 2.4ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:12 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 2]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.5ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (1.2ms)
  Rendered chats/show.html.erb within layouts/application (11.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 46ms (Views: 41.8ms | ActiveRecord: 0.5ms)


Started GET "/sync/refetch.json?auth_token=%2F465d55703775a6203d5ac832ff7f781b9b840fb0&partial_name=message_row&resource_name=message&resource_id=87" for ::1 at 2017-10-27 15:43:12 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/465d55703775a6203d5ac832ff7f781b9b840fb0", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"87"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 87]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.6ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.1ms)


Started GET "/chats" for ::1 at 2017-10-27 15:43:18 +0800
Processing by ChatsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.3ms)
  Rendered chats/_navside.html.erb (5.6ms)
  Rendered chats/index.html.erb within layouts/application (6.7ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 45ms (Views: 41.9ms | ActiveRecord: 0.3ms)


Started POST "/chats" for ::1 at 2017-10-27 15:43:20 +0800
Processing by ChatsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bEMtScqbXJR7qjgNEWVXSlGRKGw6vz/38TkliZBmPkNrwC3iaXn63yURCzUMBfv9JnP3mOhTZH6Opv9zJy49TQ==", "users"=>"2", "button"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
Redirected to http://localhost:3000/chats/3
Completed 302 Found in 4ms (ActiveRecord: 0.3ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:20 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (9.4ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 41ms (Views: 37.1ms | ActiveRecord: 0.6ms)


Started POST "/messages" for ::1 at 2017-10-27 15:43:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"3", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 3], ["created_at", "2017-10-27 07:43:22.152950"], ["updated_at", "2017-10-27 07:43:22.152950"]]
  [1m[35m (2.1ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/3
Completed 200 OK in 7ms (ActiveRecord: 2.5ms)


Started GET "/sync/refetch.json?auth_token=%2F53202ce5a924f59b8825898525998f5a073883c7&partial_name=message_row&resource_name=message&resource_id=88" for ::1 at 2017-10-27 15:43:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/53202ce5a924f59b8825898525998f5a073883c7", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"88"}
  [1m[36mMessage Load (0.2ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 88]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.3ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.1ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (13.3ms)
  Rendered layouts/_login_panel.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 48ms (Views: 43.7ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F53202ce5a924f59b8825898525998f5a073883c7&partial_name=message_row&resource_name=message&resource_id=88" for ::1 at 2017-10-27 15:43:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/53202ce5a924f59b8825898525998f5a073883c7", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"88"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 88]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.7ms)
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:43:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"3", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 3], ["created_at", "2017-10-27 07:43:22.576280"], ["updated_at", "2017-10-27 07:43:22.576280"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/3
Completed 200 OK in 6ms (ActiveRecord: 2.4ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (14.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 57ms (Views: 50.5ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F2e8656a8bcaa99b051b6de7c4ecafafc3351d319&partial_name=message_row&resource_name=message&resource_id=89" for ::1 at 2017-10-27 15:43:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2e8656a8bcaa99b051b6de7c4ecafafc3351d319", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"89"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 89]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/sync/refetch.json?auth_token=%2F2e8656a8bcaa99b051b6de7c4ecafafc3351d319&partial_name=message_row&resource_name=message&resource_id=89" for ::1 at 2017-10-27 15:43:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/2e8656a8bcaa99b051b6de7c4ecafafc3351d319", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"89"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 89]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.1ms)
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:43:22 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"3", "commit"=>"发送"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["body", ""], ["user_id", 1], ["chat_id", 3], ["created_at", "2017-10-27 07:43:22.887183"], ["updated_at", "2017-10-27 07:43:22.887183"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats/3
Completed 200 OK in 7ms (ActiveRecord: 2.4ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:22 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (16.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 51ms (Views: 44.8ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2Fc9eaf68c857b5cd5a6b40bef38fca5f324177324&partial_name=message_row&resource_name=message&resource_id=90" for ::1 at 2017-10-27 15:43:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c9eaf68c857b5cd5a6b40bef38fca5f324177324", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"90"}
  [1m[35mMessage Load (0.2ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 90]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.9ms)
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/sync/refetch.json?auth_token=%2Fc9eaf68c857b5cd5a6b40bef38fca5f324177324&partial_name=message_row&resource_name=message&resource_id=90" for ::1 at 2017-10-27 15:43:22 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c9eaf68c857b5cd5a6b40bef38fca5f324177324", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"90"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 90]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (3.3ms)
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/messages" for ::1 at 2017-10-27 15:43:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"3", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 3], ["created_at", "2017-10-27 07:43:23.028385"], ["updated_at", "2017-10-27 07:43:23.028385"]]
  [1m[35m (1.8ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/3
Completed 200 OK in 7ms (ActiveRecord: 2.2ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.3ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (19.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 55ms (Views: 48.3ms | ActiveRecord: 0.8ms)


Started GET "/sync/refetch.json?auth_token=%2F0809d55887e8247d58fbd709666d0eadd08663ab&partial_name=message_row&resource_name=message&resource_id=91" for ::1 at 2017-10-27 15:43:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0809d55887e8247d58fbd709666d0eadd08663ab", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"91"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 91]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2F0809d55887e8247d58fbd709666d0eadd08663ab&partial_name=message_row&resource_name=message&resource_id=91" for ::1 at 2017-10-27 15:43:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/0809d55887e8247d58fbd709666d0eadd08663ab", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"91"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 91]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.8ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started POST "/messages" for ::1 at 2017-10-27 15:43:23 +0800
Processing by MessagesController#create as JS
  Parameters: {"utf8"=>"✓", "message"=>{"body"=>""}, "chat_room"=>"3", "commit"=>"发送"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "messages" ("body", "user_id", "chat_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", ""], ["user_id", 1], ["chat_id", 3], ["created_at", "2017-10-27 07:43:23.188463"], ["updated_at", "2017-10-27 07:43:23.188463"]]
  [1m[35m (0.7ms)[0m  commit transaction
Redirected to http://localhost:3000/chats/3
Completed 200 OK in 5ms (ActiveRecord: 1.1ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:23 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.4ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (24.0ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 58ms (Views: 51.2ms | ActiveRecord: 0.9ms)


Started GET "/sync/refetch.json?auth_token=%2Fc62dc74f87dd497ae9fb06bedd6e10ebcf8e0f30&partial_name=message_row&resource_name=message&resource_id=92" for ::1 at 2017-10-27 15:43:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c62dc74f87dd497ae9fb06bedd6e10ebcf8e0f30", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"92"}
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1[0m  [["id", 92]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started GET "/sync/refetch.json?auth_token=%2Fc62dc74f87dd497ae9fb06bedd6e10ebcf8e0f30&partial_name=message_row&resource_name=message&resource_id=92" for ::1 at 2017-10-27 15:43:23 +0800
Processing by Sync::RefetchesController#show as JSON
  Parameters: {"auth_token"=>"/c62dc74f87dd497ae9fb06bedd6e10ebcf8e0f30", "partial_name"=>"message_row", "resource_name"=>"message", "resource_id"=>"92"}
  [1m[35mMessage Load (0.1ms)[0m  SELECT  "messages".* FROM "messages" WHERE "messages"."id" = ? LIMIT 1  [["id", 92]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (2.4ms)
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:24 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.2ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (22.0ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 59ms (Views: 53.1ms | ActiveRecord: 0.9ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:43:27 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.1ms)
  [1m[35mMessage Load (0.1ms)[0m  SELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (21.7ms)
  Rendered layouts/_login_panel.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 57ms (Views: 52.3ms | ActiveRecord: 0.7ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:47:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_navside.html.erb (32.6ms)
  Rendered chats/show.html.erb within layouts/application (33.7ms)
Completed 500 Internal Server Error in 44ms (ActiveRecord: 0.6ms)

ActionView::Template::Error (undefined local variable or method `message' for #<#<Class:0x00007fdb47dda098>:0x00007fdb4be6af18>
Did you mean?  message_url):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(message.body, length: 10) %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289923906700'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289923906700'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289923906700'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (10.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (59.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (47.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (104.2ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:48:43 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_navside.html.erb (37.0ms)
  Rendered chats/show.html.erb within layouts/application (38.1ms)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.5ms)

ActionView::Template::Error (undefined local variable or method `message' for #<#<Class:0x00007fdb47dda098>:0x00007fdb4f8eb318>
Did you mean?  message_url):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= message.body %> %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289954610980'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289954610980'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289954610980'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (61.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (41.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (88.1ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:48:54 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.0ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_navside.html.erb (30.9ms)
  Rendered chats/show.html.erb within layouts/application (32.0ms)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.5ms)

ActionView::Template::Error (undefined local variable or method `message' for #<#<Class:0x00007fdb47dda098>:0x00007fdb4d1eed00>
Did you mean?  message_url):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= message.url %> %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289902785920'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289902785920'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289902785920'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (53.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (47.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (105.9ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:49:04 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.9ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (28.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 79ms (Views: 74.0ms | ActiveRecord: 0.7ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:50:33 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_navside.html.erb (41.7ms)
  Rendered chats/show.html.erb within layouts/application (42.8ms)
Completed 500 Internal Server Error in 53ms (ActiveRecord: 0.5ms)

ActionView::Template::Error (undefined local variable or method `message' for #<#<Class:0x00007fdb47dda098>:0x00007fdb43398818>
Did you mean?  message_url):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(message.created_at.to_formatted_s(:db), length: 10) %> %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289876398500'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289876398500'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289876398500'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (54.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (45.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (99.5ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:51:45 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_navside.html.erb (6.9ms)
  Rendered chats/show.html.erb within layouts/application (8.0ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.5ms)

ActionView::Template::Error (undefined method `body' for "http://localhost:3000/messages/3":String):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(message_url.body, length: 10) %> %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289935712720'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289935712720'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289935712720'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (89.3ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:52:00 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (5.8ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.2ms)
  Rendered chats/show.html.erb within layouts/application (27.5ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 79ms (Views: 74.1ms | ActiveRecord: 0.7ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:52:03 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.2ms)
  Rendered chats/_navside.html.erb (4.0ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (24.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 72ms (Views: 65.4ms | ActiveRecord: 0.8ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:53:53 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.2ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_navside.html.erb (8.5ms)
  Rendered chats/show.html.erb within layouts/application (9.4ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.8ms)

ActionView::Template::Error (undefined method `truncate' for #<Message:0x00007fdb4e9bbaa0>
Did you mean?  trust):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(Message.new, length: 10) %> %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289954211620'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289954211620'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289954211620'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (50.0ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (37.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (96.9ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:54:16 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1[0m  [["chat_id", 3], ["id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?  [["chat_id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_navside.html.erb (31.4ms)
  Rendered chats/show.html.erb within layouts/application (32.3ms)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.7ms)

ActionView::Template::Error (undefined local variable or method `message' for #<#<Class:0x00007fdb47dda098>:0x00007fdb495f12a8>
Did you mean?  message_url):
    52:               <%= link_to chat_path(chatroom), class: 'list-group-item' do %>
    53:                   <!-- <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name, length: 10) %> -->
    54:                   <i class="fa fa-wechat fa-5"></i> <%= truncate(chatroom.name) %>
    55:                   <i class="fa fa-wechat fa-5"></i> <%= message.body %> %>
    56:                   <text Cid="chatroom-<%= chatroom.id %>"></text>
    57:               <% end %>
    58:           <% end %>
  app/views/chats/_navside.html.erb:55:in `block (2 levels) in _app_views_chats__navside_html_erb___171408089416622537_70289902722560'
  app/views/chats/_navside.html.erb:52:in `block in _app_views_chats__navside_html_erb___171408089416622537_70289902722560'
  app/views/chats/_navside.html.erb:51:in `_app_views_chats__navside_html_erb___171408089416622537_70289902722560'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (47.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (88.7ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:54:34 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (2.0ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.4ms)

SyntaxError (/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:55: syntax error, unexpected ')', expecting '('
put_buffer.append=( message. );@output_buffer.safe_append=' 
                              ^
/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:57: syntax error, unexpected keyword_end, expecting ')'
'.freeze;               end 
                           ^
/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:72: syntax error, unexpected keyword_ensure, expecting ')'
          ensure
                ^
/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:74: syntax error, unexpected keyword_end, expecting ')'
          end
             ^):
  app/views/chats/_navside.html.erb:55: syntax error, unexpected ')', expecting '('
  app/views/chats/_navside.html.erb:57: syntax error, unexpected keyword_end, expecting ')'
  app/views/chats/_navside.html.erb:72: syntax error, unexpected keyword_ensure, expecting ')'
  app/views/chats/_navside.html.erb:74: syntax error, unexpected keyword_end, expecting ')'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (38.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (85.8ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:54:36 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  Rendered chats/_navside.html.erb (1.0ms)
  Rendered chats/show.html.erb within layouts/application (2.0ms)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.4ms)

SyntaxError (/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:55: syntax error, unexpected ')', expecting '('
put_buffer.append=( message. );@output_buffer.safe_append=' 
                              ^
/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:57: syntax error, unexpected keyword_end, expecting ')'
'.freeze;               end 
                           ^
/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:72: syntax error, unexpected keyword_ensure, expecting ')'
          ensure
                ^
/Users/qianyandai/Desktop/Ruby/RailsChat/app/views/chats/_navside.html.erb:74: syntax error, unexpected keyword_end, expecting ')'
          end
             ^):
  app/views/chats/_navside.html.erb:55: syntax error, unexpected ')', expecting '('
  app/views/chats/_navside.html.erb:57: syntax error, unexpected keyword_end, expecting ')'
  app/views/chats/_navside.html.erb:72: syntax error, unexpected keyword_ensure, expecting ')'
  app/views/chats/_navside.html.erb:74: syntax error, unexpected keyword_end, expecting ')'
  app/views/chats/show.html.erb:3:in `_app_views_chats_show_html_erb__999250127877406230_70289945381700'


  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.2ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/actionpack-4.2.10/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (47.8ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (39.9ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.6ms)
  Rendered /Users/qianyandai/.rvm/gems/ruby-2.4.2/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (92.4ms)


Started GET "/chats/3" for ::1 at 2017-10-27 15:54:46 +0800
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mChat Load (0.0ms)[0m  [1mSELECT  "chats".* FROM "chats" WHERE "chats"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ? AND "users"."id" = ? LIMIT 1  [["chat_id", 3], ["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?[0m  [["friend_id", 1]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.2ms)
  [1m[36mMessage Load (0.1ms)[0m  [1mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = ?[0m  [["chat_id", 3]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.7ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered sync/messages/refetch/_message_row.html.erb (1.0ms)
  Rendered chats/_chat_info.html.erb (0.1ms)
  Rendered chats/show.html.erb within layouts/application (23.5ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 54ms (Views: 49.0ms | ActiveRecord: 0.6ms)


Started GET "/users/index_json?query=user" for ::1 at 2017-10-27 15:55:02 +0800
Processing by UsersController#index_json as JSON
  Parameters: {"query"=>"user"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE ("users"."id" != 1) AND ("users"."id" NOT IN (SELECT "users"."id" FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE ("users"."id" != 1) AND "friendships"."user_id" = ?)) AND (users.name LIKE '%user%')[0m  [["user_id", 1]]
Completed 200 OK in 24ms (Views: 9.8ms | ActiveRecord: 0.6ms)


Started POST "/friendships?friend_id=6" for ::1 at 2017-10-27 15:55:09 +0800
Processing by FriendshipsController#create as HTML
  Parameters: {"authenticity_token"=>"dyeJf8jI8Mxc8bSL1PQpG0WR1X0FuUCidTp2qJjlzW1wpInUaypWhwJKh7PJlIWsMnMKiddVGysKpaxSL63OYw==", "friend_id"=>"6"}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "friendships" ("friend_id", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["friend_id", 6], ["user_id", 1], ["created_at", "2017-10-27 07:55:09.930853"], ["updated_at", "2017-10-27 07:55:09.930853"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/chats
Completed 302 Found in 6ms (ActiveRecord: 2.6ms)


Started GET "/chats" for ::1 at 2017-10-27 15:55:09 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (4.0ms)
  Rendered chats/index.html.erb within layouts/application (5.2ms)
  Rendered layouts/_login_panel.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 48ms (Views: 45.1ms | ActiveRecord: 0.3ms)


Started DELETE "/friendships/6" for ::1 at 2017-10-27 15:55:13 +0800
Processing by FriendshipsController#destroy as HTML
  Parameters: {"authenticity_token"=>"zinbRichOQg0k4YK5oFl8nm0KijJZSryMOtq0UllB3jJqtvthMOfQ2ootTL74clFDlb13BuJcXtPdLAr/i0Edg==", "id"=>"6"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mFriendship Load (0.1ms)[0m  [1mSELECT  "friendships".* FROM "friendships" WHERE "friendships"."user_id" = ? AND "friendships"."friend_id" = ? LIMIT 1[0m  [["user_id", 1], ["friend_id", 6]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "friendships" WHERE "friendships"."id" = ?[0m  [["id", 4]]
  [1m[35m (1.9ms)[0m  commit transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mChat Load (0.1ms)[0m  SELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?  [["user_id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "chats_users" ON "users"."id" = "chats_users"."user_id" WHERE "chats_users"."chat_id" = ?[0m  [["chat_id", 3]]
Redirected to http://localhost:3000/chats
Completed 302 Found in 9ms (ActiveRecord: 2.7ms)


Started GET "/chats" for ::1 at 2017-10-27 15:55:13 +0800
Processing by ChatsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."user_id" WHERE "friendships"."friend_id" = ?  [["friend_id", 1]]
  [1m[36mChat Load (0.1ms)[0m  [1mSELECT "chats".* FROM "chats" INNER JOIN "chats_users" ON "chats"."id" = "chats_users"."chat_id" WHERE "chats_users"."user_id" = ?[0m  [["user_id", 1]]
  Rendered chats/_search_fridends.html.erb (0.1ms)
  Rendered chats/_navside.html.erb (3.7ms)
  Rendered chats/index.html.erb within layouts/application (4.8ms)
  Rendered layouts/_login_panel.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_content.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 37ms (Views: 34.3ms | ActiveRecord: 0.3ms)
